{"version":3,"sources":["components/input-field.jsx","components/MealTags.js","components/Notification/NotificationItem.js","components/NavBar.js","components/Tags.js","components/NewItemPage.js","components/CheckoutForm.js","components/ViewListingPage.js","components/ListingModal.js","CardList.js","SideBar.js","components/UpdateItemPage.js","components/Login/SignUpForm.js","components/Login/SignInForm.js","components/Login/Login.js","components/SideBar.js","components/StarRating.js","components/search-form.jsx","components/SortMeals.js","components/Notification/NotificationPage.js","components/MainPage.js","components/Profile/ProfileCard.js","components/Profile/Post.js","components/Profile/ProfilePage.js","App.js","serviceWorker.js","index.js"],"names":["InputField","state","this","props","labelName","placeHolder","input","onChange","type","class","placeholder","ref","Component","MealTags","inputKeyDown","event","val","target","value","key","tags","find","tag","toLowerCase","setState","updateMealTags","tagInput","removeTag","length","i","newTags","splice","className","map","Badge","variant","onClick","onKeyDown","c","NotificationItem","notifications","items","display_Notification","bind","display_Correct_Notification_Body","create_Buyer_Request_Notification","create_Seller_Request_Notification","create_Buyer_Notification_Response","create_Seller_Notification_Response","update_Request_Status","seller_name","meal_name","meal_price","buyer_name","seller_response","notification","seller_email","myEmail","response","buyer_displayname","seller_displayname","status","firebase","database","set","meal_id","size","round","src","meal_imgsrc","email","localStorage","NavBar","promise_setState","newState","a","Promise","resolve","Read_Notifications","preventDefault","show","Load_Notifications_From_Firebase","Relax_Notification_Bell","Load_Request_From_Firebase","that","child","once","snapshot","newObject","object_array","concat","then","on","newKey","Update_Notification_Bell","getItem","purchase_requests","added","hasNewNotifications","bellColor","split","join","Fragment","to","id","data-toggle","data-target","aria-expanded","width","active","animate","color","pathname","Tags","AWS","config","region","credentials","CognitoIdentityCredentials","IdentityPoolId","fileName","update","s3","S3","apiVersion","params","Bucket","NewItemPage","handleValueChange","mealPriceInput","addPhoto","files","document","getElementById","alert","file","name","Body","Key","putObject","err","data","console","log","stack","mealTags","updateIngredientTags","ingredientTags","updateAllergyTags","allergyTags","handleAddMeal","testID","uuidv4","_data","mealID","mealDescription","mealDescriptionInput","current","mealImagePath","mealName","mealNameInput","mealPrice","amount","mealQuantity","mealQuantityInput","mealIngredients","mealAllergy","userEmail","_data2","JSON","stringify","$","ajax","url","headers","accept","crossDomain","success","result","error","xhr","dataType","handleChange","React","createRef","mealTagsInput","mealIngredientsInput","mealAllergyInput","s3Url","maskedvalue","floatvalue","alt","htmlFor","label","rows","onChangeEvent","CheckoutForm","getPosterEmail","meal","poster","loadUserInfo","Item","displayname","posterName","handleSubmit","stripe","elements","user","queryString","mealId","client_secret","confirmCardPayment","payment_method","card","getElement","CardElement","billing_details","message","paymentIntent","myRef","push","getKey","buyer_email","snap","window","setTimeout","location","href","Url","contentType","onSubmit","options","style","base","fontSize","invalid","disabled","stripePromise","loadStripe","ListingPage","allergies","allergens","allergy","imgAlt","zIndex","position","top","height","ListingModal","tabIndex","role","aria-labelledby","aria-hidden","CardList","foodCards","foodItems","foodItem","index","price","description","imgUrl","getMealFunc","getMealById","FoodCard","UpdateItemPage","loadPostings","pathParam","String","trim","handleDescriptionChange","handleNameChange","handleQuantityChange","curMeal","fillFields","render","ingredients","SignUpForm","handleCreateNewUser","firstName","lastName","username","hasAgreedToTerms","Check_If_User_Exists_In_DB","header","toString","valueOf","updateFirstName","updateLastName","updateUserName","updateLocation","updateCode","Sign_Up","Confirm_Sign_Up","code","checked","password","Auth","signUp","step","confirmSignUp","firebaseEmail","imgsrc","required","SignInForm","jwt","signIn","currentSession","auth","idToken","jwtToken","setItem","Login","activeClassName","exact","path","component","SideBar","removeItem","reload","userListings","marginTop","backgroundColor","right","city","opacity","pending","sold","bottom","logOut","StarRating","rating","onSelect","Array","star","ratingValue","SearchForm","clearInputs","minPrice","maxPrice","cities","selectedCity","updateSelectedCity","sortOptions","selectedSortOption","updateSortOption","getMeals","updateRequestedMeal","updatePriceRange","updateRequestedRating","left","Form","Group","Control","Row","Col","DropdownButton","title","Dropdown","eventKey","sortOption","Button","sortMeals","sort","otherMeal","sortMealByName","Date","sortMealByDate","parseInt","sortMealByPrice","NotificationPage","replace","MainPage","minRating","requestedMeal","getUserMeals","Http","XMLHttpRequest","open","onreadystatechange","e","responseText","mealIDs","promise","getMealIDs","filterMeals","meals","QueryString","apply","undefined","filter","includes","getUserInfo","activeListings","listingStatus","pendingListings","soldListings","renderMain","setCurrentMeal","currMeal","item","ProfileCard","userObj","firstname","lastname","Posts","Delete_Meal_From_Meals_Table","Delete_Meal_From_Users_Table","userID","deletePost","userPostings","indexOf","deleteItem","createPost","delete","post","list_of_posts","posts","ProfilePage","callLog","result2","processArray","array","getUserObject","getUserPostings","promise_async","sortActive","sortPending","forEach","element","temp","userActivePostings","userPendingPostings","filteredItems","posting","Post","Amplify","configure","identityPoolId","userPoolId","userPoolWebClientId","App","foodDescription","callBackendAPI","request","fetch","json","body","Error","Boolean","hostname","match","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.03ad044a.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\n\r\nclass InputField extends Component {\r\n  state = {};\r\n  render() {\r\n    const {\r\n      labelName,\r\n      placeHolder,\r\n      input,\r\n      onChange\r\n    } = this.props;\r\n    return (\r\n      <div>\r\n        <label>{labelName}:</label>\r\n        <input\r\n          type=\"text\"\r\n          class=\"form-control\"\r\n          placeholder={placeHolder}\r\n          ref={input}\r\n          onChange={onChange}\r\n        ></input>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default InputField;\r\n","import React, { Component } from \"react\";\r\nimport { Badge, Form } from \"react-bootstrap\";\r\n\r\nclass MealTags extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      tags: [],\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"input-tag\">\r\n        {this.state.tags.map((tag, i) => (\r\n          <Badge variant=\"primary\" key={tag}>\r\n            {tag}\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                this.removeTag(i);\r\n              }}\r\n            >\r\n              x\r\n            </button>\r\n          </Badge>\r\n        ))}\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Meal Tag\"\r\n          onKeyDown={this.inputKeyDown}\r\n          ref={(c) => {\r\n            this.tagInput = c;\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  inputKeyDown = (event) => {\r\n    const val = event.target.value;\r\n    if (event.key === \"Enter\" && val) {\r\n      // Check if tag already exists\r\n      if (this.state.tags.find((tag) => tag.toLowerCase() === val.toLowerCase())) return;\r\n      this.setState({ tags: [...this.state.tags, val.toLowerCase()] }, () => {\r\n        this.props.updateMealTags(this.state.tags);\r\n      });\r\n      this.tagInput.value = null;\r\n    } else if (event.key === \"Backspace\" && !val) {\r\n      this.removeTag(this.state.tags.length - 1);\r\n    }\r\n  };\r\n\r\n  removeTag = (i) => {\r\n    const newTags = [...this.state.tags];\r\n    newTags.splice(i, 1);\r\n    this.setState({ tags: newTags }, () => {\r\n      this.props.updateMealTags(this.state.tags);\r\n    });\r\n  };\r\n}\r\n\r\nexport default MealTags;\r\n","// Original commit by PJ\r\n\r\nimport React, { Component } from \"react\";\r\nimport firebase from \"firebase\";\r\nimport Avatar from 'react-avatar';\r\nimport './Notification.css';\r\n\r\n//NotificationItem class handles only the display of the notifications\r\nclass NotificationItem extends Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            notifications: [],\r\n            items:{}\r\n        }\r\n\r\n        this.display_Notification = this.display_Notification.bind(this);\r\n        this.display_Correct_Notification_Body = this.display_Correct_Notification_Body.bind(this);\r\n\r\n        this.create_Buyer_Request_Notification = this.create_Buyer_Request_Notification.bind(this);\r\n        this.create_Seller_Request_Notification = this.create_Seller_Request_Notification.bind(this);\r\n        this.create_Buyer_Notification_Response = this.create_Buyer_Notification_Response.bind(this);\r\n        this.create_Seller_Notification_Response = this.create_Seller_Notification_Response.bind(this);\r\n\r\n        this.update_Request_Status = this.update_Request_Status.bind(this);\r\n    }\r\n\r\n        //Notification bodies for when a purchase request is made\r\n        create_Buyer_Request_Notification(seller_name, meal_name, meal_price){\r\n            return \"You have requested to purchase \" + meal_name + \" from \" + seller_name + \" for \" + meal_price;\r\n        }\r\n        create_Seller_Request_Notification(buyer_name, meal_name, meal_price){\r\n            return buyer_name + \" has requested to purchase \" + meal_name + \" from you for \" + meal_price;\r\n        }\r\n    \r\n        //Notification bodies for when a purchase request is accepted or declined\r\n        create_Buyer_Notification_Response(seller_name, meal_name, seller_response){\r\n            return seller_name + \" has \" + seller_response + \" your request to purchase \" + meal_name;\r\n        }\r\n        create_Seller_Notification_Response(buyer_name, meal_name, meal_price, seller_response){\r\n            return \"You have \" + seller_response + \" \" + buyer_name + \"'s request to purchase \" + meal_name + \" for \" + meal_price;\r\n        }\r\n    \r\n\r\n    display_Correct_Notification_Body(notification){\r\n\r\n        if(notification.seller_email === this.props.myEmail){ //I am a seller\r\n\r\n            if(notification.response === \"pending\") //and I see a pending request from a buyer\r\n            { \r\n                return <p>{this.create_Seller_Request_Notification(notification.buyer_displayname, notification.meal_name, notification.meal_price)}</p>\r\n            }\r\n            else //and I have accepted or declined a request from a buyer\r\n            {\r\n                return <p>{this.create_Seller_Notification_Response(notification.buyer_displayname, notification.meal_name, notification.meal_price, notification.response)}</p>\r\n            }\r\n\r\n        }else{ //I am a buyer\r\n\r\n            if(notification.response === \"pending\") //and I see a pending request from a seller\r\n            { \r\n                return <p>{this.create_Buyer_Request_Notification(notification.seller_displayname, notification.meal_name, notification.meal_price)}</p>\r\n            }\r\n            else //and I have accepted or declined a request from a buyer\r\n            {\r\n                return <p>{this.create_Buyer_Notification_Response(notification.seller_displayname, notification.meal_name, notification.meal_price, notification.response)}</p>\r\n            }\r\n        }\r\n    }\r\n\r\n    update_Request_Status(key,status){\r\n        //console.log(\"what is the key: \" + key + \" status: \" + status);\r\n        firebase.database().ref(\"requests/\" + key + \"/response\").set(status);\r\n    }\r\n\r\n    //@TODO-LATER: make accept and decline buttons dynamic\r\n    display_Notification(notification){\r\n        return <li key={notification.meal_id}> \r\n                    <Avatar className=\"avatar\" size=\"50px\" round=\"50px\" src={notification.meal_imgsrc}/>\r\n                    {this.display_Correct_Notification_Body(notification)}\r\n                    <button className=\"accept-bttn\" onClick={() => this.update_Request_Status(notification.meal_id,\"accepted\")}>accept</button> \r\n                    <button className=\"decline-bttn\" onClick={() =>this.update_Request_Status(notification.meal_id,\"declined\")}>decline</button>   \r\n                </li>\r\n    }\r\n\r\n\r\n    render(){\r\n        var notifications = this.props.notifications;\r\n        var items = notifications.map(this.display_Notification);\r\n        //display the returned html of list items\r\n        return(\r\n            <div className=\"item-container\">\r\n                <ul className=\"item-list\">\r\n                    {items} \r\n                </ul>\r\n            </div>\r\n        )\r\n    }\r\n}\r\nexport default NotificationItem;","import React, {Component} from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport firebase from 'firebase';\r\n// import '../components/Notification/Notification.css';\r\nimport NotificationItem from'../components/Notification/NotificationItem.js';\r\nimport BellIcon from \"react-bell-icon\";\r\nvar email = localStorage.email;\r\nvar profileLink = \"/profile\" + email;\r\n\r\nclass NavBar extends Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n        const email = localStorage.getItem(\"email\");\r\n\r\n\r\n        //this array will contain notification payloads from firebase\r\n        this.state={\r\n            notifications: [],\r\n            purchase_requests: [],\r\n            show: false,\r\n            added: false,\r\n            hasNewNotifications: false,\r\n            bellColor: \"#000000\",\r\n            // email: email.replace(\".\", \"_DOT_\") \r\n            email: email.split('.').join('_DOT_')\r\n        }\r\n\r\n        this.Read_Notifications = this.Read_Notifications.bind(this);\r\n        this.Load_Notifications_From_Firebase = this.Load_Notifications_From_Firebase.bind(this);\r\n        this.Load_Request_From_Firebase = this.Load_Request_From_Firebase.bind(this);\r\n        this.promise_setState = this.promise_setState.bind(this);\r\n    }\r\n\r\n    /*CASE 1: user clicks on notification bell and sees stored notifications from firebase */\r\n\r\n    promise_setState = async(newState) =>{\r\n        new Promise((resolve) => {\r\n            this.setState(newState, resolve)\r\n        });\r\n    }\r\n\r\n    Read_Notifications = async(event) =>{\r\n        event.preventDefault();\r\n\r\n        //console.log(\"Before the if() show: \" + this.state.show + \" added: \" + this.state.added);\r\n        if(this.state.show === false) //is false then proceed to load data\r\n        { \r\n            await this.promise_setState({ show: true});\r\n\r\n            await this.Load_Notifications_From_Firebase(this.state.email);\r\n            // await this.Load_Notifications_From_Firebase(id);\r\n            this.Relax_Notification_Bell();\r\n            //console.log(\"After first statement show: \" + this.state.show + \" added: \" + this.state.added);\r\n        }\r\n        else //if state is true then reset\r\n        {\r\n            await this.promise_setState({\r\n                notifications: [],\r\n                show:false\r\n            });\r\n            this.Relax_Notification_Bell();\r\n            //console.log(\"After second statement show: \" + this.state.show + \" added: \" + this.state.added);\r\n        }\r\n    }\r\n\r\n    Load_Request_From_Firebase = async(key) =>{\r\n        var that = this;\r\n        firebase.database().ref(\"requests\").child(key)\r\n        .once(\"value\", function(snapshot){\r\n            var newObject = snapshot.val();\r\n            var object_array = that.state.notifications.concat(newObject);\r\n\r\n            that.promise_setState({notifications: object_array})\r\n            .then(value=>{\r\n                //console.log(newObject.meal_name + \" was added into notification array\");\r\n            });            \r\n        })      \r\n    }\r\n\r\n\r\n\r\n    Load_Notifications_From_Firebase = async(email) =>{\r\n        var that = this;\r\n\r\n        firebase.database().ref(\"users/\" + email).child(\"purchase_requests\")\r\n        .on(\"child_added\", function(snapshot){\r\n\r\n            if(that.state.show === true){ \r\n                var newKey = snapshot.key;\r\n                //fill notification array\r\n                that.Load_Request_From_Firebase(newKey); \r\n            }\r\n            else if(that.state.show === false)\r\n            {\r\n                that.Update_Notification_Bell();\r\n            }\r\n        })\r\n    }\r\n\r\n    /*EOF Case 1*/\r\n\r\n    /*BOF NOTIFICATION BELL*/\r\n\r\n    Update_Notification_Bell(){\r\n        this.setState({\r\n            hasNewNotifications: true,\r\n            bellColor: \"#ff2121\" \r\n        })\r\n    }\r\n\r\n    Relax_Notification_Bell(){\r\n        this.setState({\r\n            hasNewNotifications: false,\r\n            bellColor: \"#000000\" \r\n        })\r\n    }\r\n\r\n    /*EOF NOTIFICATION BELL*/\r\n   \r\n    render() {\r\n        return (\r\n            <React.Fragment>\r\n                <div className=\"navbar bg-light navbar-expand-md fixed-top top-menu justify-content-between shadow\">\r\n                    <NavLink to=\"../\">\r\n                        <div className=\"nav-link\" >Food Network</div>\r\n                    </NavLink>\r\n                    <div className=\"navbar-nav\">\r\n                        <div className=\"collapse navbar-collapse\"  id=\"navbarNav\">\r\n                            <NavLink to=\"/newItem\">\r\n                                <div className=\"nav-link\"><div className=\"fas fa-plus\"></div></div>\r\n                            </NavLink>\r\n                            <div className=\"nav-link\" data-toggle=\"collapse\" data-target=\"#searchbar\" aria-expanded=\"false\">\r\n                                <i className=\"fas fa-search\"></i>\r\n                            </div>     \r\n                            <NavLink to=\"/\">\r\n                                <div className=\"nav-link\" ><i className=\"fas fa-envelope\"></i></div>  \r\n                            </NavLink>\r\n                            {/* <form onSubmit={this.Read_Notifications}>  */}\r\n                                {/* <button type=\"submit\" className=\"\"> */}\r\n                                    <BellIcon width='20' onClick={this.Read_Notifications} type=\"submit\" active={this.state.hasNewNotifications} \r\n                                        animate={this.state.hasNewNotifications} color={this.state.bellColor}/>\r\n                                {/* </button> */}\r\n                            {/* </form> */}\r\n                            <NavLink to={{\r\n                                pathname: `/profile/${email}`\r\n                                }}>\r\n                                <div className=\"nav-link\" ><i className=\"fas fa-user-friends\"></i></div>    \r\n                            </NavLink>\r\n                        </div>\r\n                        <div className=\"nav-link\" data-toggle=\"collapse\" data-target=\"#sidebar\" aria-expanded=\"false\">\r\n                            <i className=\"fas fa-bars\"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <NotificationItem notifications={this.state.notifications} myEmail={localStorage.getItem(\"email\").split('.').join('_DOT_')}/>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default NavBar;\r\n\r\n","import React, { Component } from \"react\";\r\nimport { Badge, Form } from \"react-bootstrap\";\r\n\r\nclass Tags extends Component {\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      tags: [],\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"input-tag\">\r\n        {this.state.tags.map((tag, i) => (\r\n          <Badge variant=\"primary\" key={tag}>\r\n            {tag}\r\n            <button\r\n              type=\"button\"\r\n              onClick={() => {\r\n                this.removeTag(i);\r\n              }}\r\n            >\r\n              x\r\n            </button>\r\n          </Badge>\r\n        ))}\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Enter tags...\"\r\n          onKeyDown={this.inputKeyDown}\r\n          ref={(c) => {\r\n            this.tagInput = c;\r\n          }}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  inputKeyDown = (event) => {\r\n    const val = event.target.value;\r\n    if (event.key === \"Enter\" && val) {\r\n      // Check if tag already exists\r\n      if (this.state.tags.find((tag) => tag.toLowerCase() === val.toLowerCase())) return;\r\n      this.setState({ tags: [...this.state.tags, val.toLowerCase()] }, () => {\r\n        this.props.updateMealTags(this.state.tags);\r\n      });\r\n      this.tagInput.value = null;\r\n    } else if (event.key === \"Backspace\" && !val) {\r\n      this.removeTag(this.state.tags.length - 1);\r\n    }\r\n  };\r\n\r\n  removeTag = (i) => {\r\n    const newTags = [...this.state.tags];\r\n    newTags.splice(i, 1);\r\n    this.setState({ tags: newTags }, () => {\r\n      this.props.updateMealTags(this.state.tags);\r\n    });\r\n  };\r\n}\r\n\r\nexport default Tags;\r\n","import React, { Component } from \"react\";\r\nimport InputField from \"./input-field\";\r\n// import CurrencyInput from 'react-currency-input';\r\nimport CurrencyInput from \"react-currency-input\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"../styles/style.css\";\r\nimport MealTags from \"./MealTags\";\r\nimport NavBar from \"./NavBar\";\r\nimport Tags from \"./Tags\";\r\nimport AWS from 'aws-sdk';\r\nimport $ from 'jquery';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport { Badge, Form } from \"react-bootstrap\";\r\n\r\n// var AWS = require(\"aws-sdk\");\r\n\r\nAWS.config.region = 'us-west-2';\r\nAWS.config.credentials = new AWS.CognitoIdentityCredentials({\r\n    IdentityPoolId: 'us-west-2:cb1b59d8-6d8b-4d56-a187-5b91922f84d7',\r\n});\r\n\r\nvar bucketName = \"foodimagebucket\";\r\nvar bucketRegion = \"us-west-2\";\r\nvar IdentityPoolId = \"us-west-2:b8d920b2-21d8-4843-80a3-9dadec543d92\";\r\nvar fileName = \"\";\r\n\r\nAWS.config.update({\r\n    region: bucketRegion,\r\n    credentials: new AWS.CognitoIdentityCredentials({\r\n        IdentityPoolId: IdentityPoolId\r\n        })\r\n});\r\n\r\nconst s3 = new AWS.S3({\r\n    apiVersion: \"2006-03-01\",\r\n    params: {Bucket: bucketName}\r\n});\r\n\r\nclass NewItemPage extends Component {\r\n    \r\n    constructor(props) {\r\n        \r\n        super(props);\r\n\r\n        this.state = {\r\n            amount: 0.00,\r\n            mealTags: [],\r\n            ingredientTags: [],\r\n            allergyTags: []\r\n        };\r\n        \r\n        this.handleChange = this.handleChange.bind(this);\r\n\r\n        this.mealNameInput = React.createRef();\r\n        this.mealPriceInput = React.createRef();\r\n        this.mealDescriptionInput = React.createRef();\r\n        this.mealQuantityInput = React.createRef();\r\n        this.mealTagsInput = React.createRef();\r\n        this.mealIngredientsInput = React.createRef();\r\n        this.mealAllergyInput = React.createRef();\r\n\r\n        this.s3Url = '';\r\n    }\r\n\r\n    handleChange(event, maskedvalue, floatvalue){\r\n        this.setState({amount: maskedvalue});\r\n    }\r\n\r\n    render() {\r\n        const{\r\n            updateMealTags\r\n        } = this.props;\r\n        return (\r\n            <div class=\"mt-4 p-4\">\r\n                <NavBar></NavBar>\r\n                <InputField labelName=\"What is your meal?\" placeHolder=\"Hamburger, Tofu, Sushi...\" input={this.mealNameInput} />\r\n\r\n                <div class=\"row justify-content-center p-4 border bg-light\" id=\"photo-and-description\">\r\n\r\n                    <form class=\"md-form w-50 p-4\">\r\n                        <div class=\"file-field\">\r\n                            <div class=\"z-depth-1-half mb-4\">\r\n                                <img id=\"FoodImage\" src=\"https://mdbootstrap.com/img/Photos/Others/placeholder.jpg\" class=\"img-fluid\"\r\n                                    alt=\"example placeholder\"></img>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"d-flex justify-content-center\">\r\n                            <div class=\"btn btn-mdb-color btn-rounded float-left\">\r\n                                <span>Choose file</span>\r\n                                <input type=\"file\" id=\"photoFile\"></input>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <label htmlFor=\"mealTags\">Meal Tags:</label>\r\n                        <Tags id=\"mealTags\" updateMealTags={this.updateMealTags} />\r\n\r\n                        <label htmlFor=\"ingredientTags\">Ingredients:</label>\r\n                        <Tags id=\"ingredientTags\" updateMealTags={this.updateIngredientTags} />\r\n\r\n                        <label htmlFor=\"allergyTags\">Allergies:</label>\r\n                        <Tags id=\"allergyTags\" updateMealTags={this.updateAllergyTags} />\r\n\r\n                    </form>\r\n\r\n                    <div label=\"right column\" class=\"w-50 p-4\">\r\n                        <div label=\"food-description\">\r\n                            <label htmlFor=\"foodDescriptionBox\">Food Description</label>\r\n                            <textarea class=\"form-control rounded-0\" id=\"foodDescriptionBox\" rows=\"10\" ref={this.mealDescriptionInput}></textarea>\r\n                        </div>\r\n\r\n                        <label htmlFor=\"price\">Price:</label>\r\n\r\n                        <div>\r\n                            <CurrencyInput value={this.state.amount} onChangeEvent={this.handleChange}/>\r\n                        </div>\r\n\r\n                        <InputField labelName=\"Quantity\" placeHolder=\"\" input={this.mealQuantityInput} />\r\n\r\n                        <button class=\"btn btn-success mt-4\" type=\"button\" onClick={() => this.handleAddMeal()} >Submit Listing</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    handleValueChange = async(val) => {\r\n        this.mealPriceInput.value = val;\r\n    }\r\n\r\n\r\n    addPhoto = async() => {\r\n        var files = document.getElementById(\"photoFile\").files;\r\n        if (!files.length){\r\n            return alert(\"Please choose a file to upload first.\");\r\n        }\r\n        var file = files[0];\r\n        fileName = file.name;\r\n\r\n        var params = {\r\n            Body: file,\r\n            Bucket: bucketName,\r\n            Key: fileName,\r\n            // ACL: 'public-read',\r\n        }\r\n\r\n        s3.putObject(params, function(err, data) {\r\n            if(err) console.log(err, err.stack); //An error occured\r\n            else console.log(data); //Succesful upload\r\n        })\r\n    };\r\n\r\n    updateMealTags = (tags) => {\r\n        this.setState({ mealTags: tags.map((tag) => tag.toLowerCase()) });\r\n    };\r\n    updateIngredientTags = (tags) => {\r\n        this.setState({ ingredientTags: tags.map((tag) => tag.toLowerCase()) });\r\n    };\r\n    updateAllergyTags = (tags) => {\r\n        this.setState({ allergyTags: tags.map((tag) => tag.toLowerCase()) });\r\n    };\r\n\r\n    handleAddMeal = async () => {\r\n        \r\n        var testID = uuidv4();\r\n        console.log(testID);\r\n\r\n        var fileUrl = this.addPhoto();\r\n        \r\n        var email = localStorage.getItem(\"email\");\r\n        console.log(email);\r\n\r\n        const mealUrl =\r\n            \"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/listings\";\r\n\r\n        const userUrl = \r\n            \"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/user\";\r\n\r\n\r\n        const _data = {\r\n            mealID: testID,\r\n            mealDescription: this.mealDescriptionInput.current.value,\r\n            mealImagePath: \"https://\"+bucketName+\".s3-us-west-2.amazonaws.com/\"+fileName,\r\n            mealName: this.mealNameInput.current.value,\r\n            mealPrice: this.state.amount,\r\n            mealQuantity: this.mealQuantityInput.current.value,\r\n            mealTags: this.state.mealTags,\r\n            mealIngredients: this.state.ingredientTags,\r\n            mealAllergy: this.state.allergyTags,\r\n            userEmail: localStorage.getItem(\"email\")\r\n        };\r\n\r\n        const _data2 = {\r\n            mealID: testID,\r\n            userEmail: localStorage.getItem(\"email\")\r\n        };\r\n\r\n\r\n        console.log(\"The value of _data:\\n\"+JSON.stringify(_data));\r\n        console.log(\"The value of _data2:\\n\"+JSON.stringify(_data2));\r\n        //Puts the meal information into the database\r\n        $.ajax({\r\n            url: mealUrl,\r\n            type: \"POST\",\r\n            // dataType: \"jsonp\",\r\n            headers: {\r\n                accept: \"application/json\",\r\n            },\r\n            crossDomain: true,\r\n            data: JSON.stringify(_data),\r\n            // dataType: \"json\",\r\n            // contentType: \"application/json; charset=utf-8\",\r\n            success: function (result) {\r\n                console.log(\"Meal table MealPut success\\n\")\r\n                console.log(result);\r\n            },\r\n            error: function (xhr, status, error) {\r\n                console.log(\"Meal table MealPut failure\");\r\n                console.log(JSON.stringify(xhr));\r\n            }\r\n        });\r\n\r\n        $.ajax({\r\n            url: userUrl,\r\n            type: \"PUT\",\r\n            dataType: \"jsonp\",\r\n            headers: {\r\n                accept: \"application/json\",\r\n            },\r\n            crossDomain: true,\r\n            data: JSON.stringify(_data2),\r\n            dataType: \"json\",\r\n            contentType: \"application/json; charset=utf-8\",\r\n            success: function (result) {\r\n                console.log(\"User table MealPut success\\n\")\r\n                console.log(result);\r\n            },\r\n            error: function (xhr, status, error) {\r\n                console.log(\"User table MealPut failure\");\r\n                console.log(JSON.stringify(xhr));\r\n            }\r\n        });\r\n\r\n        return false;\r\n    };\r\n}\r\n\r\nexport default NewItemPage;","import React, { Component } from \"react\";\r\nimport { CardElement } from \"@stripe/react-stripe-js\";\r\nimport '../styles/stripe-style.css';\r\nimport $ from 'jquery';\r\n\r\nimport firebase from \"firebase/app\";\r\n\r\n// Modified template code from Stripe code sample\r\nclass CheckoutForm extends Component {\r\n    constructor (props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            posterName: {}\r\n        }\r\n    }\r\n    componentDidMount() \r\n    {\r\n        this.getPosterEmail();\r\n        console.log(this.state.posterName);\r\n    }\r\n\r\n    getPosterEmail = async () => {\r\n        const email = this.props.meal.poster;\r\n        this.loadUserInfo(email)\r\n          .then((result) => {\r\n            console.log(result.Item.displayname);\r\n            this.setState({ posterName: result.Item.displayname});\r\n          });\r\n    };\r\n\r\n    loadUserInfo(email) {\r\n        var queryString = \"/user/\" + email;\r\n        var Url = \"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/pj_stage_01\";\r\n        Url = Url.concat(queryString);\r\n    \r\n        return $.ajax({\r\n            url: Url,\r\n            type: \"GET\",\r\n            crossDomain: true,\r\n            contentType: \"application/json\",\r\n            success: function (data) {\r\n                console.log(data);\r\n            },\r\n            error: function (error) {\r\n                console.log(error);\r\n            },\r\n        });\r\n    }\r\n\r\n    handleSubmit = async (event) => {\r\n        // Block native form submission.\r\n        event.preventDefault();\r\n\r\n        const { stripe, elements } = this.props;\r\n        const meal = this.props.meal;\r\n        const user = this.props.user;\r\n        console.log(\"SUBMIT\");\r\n        const posterName = this.state.posterName;\r\n        console.log(posterName);\r\n        \r\n        if (!stripe || !elements) {\r\n            // Stripe.js has not loaded yet. Make sure to disable\r\n            // form submission until Stripe.js has loaded.\r\n            return;\r\n        }\r\n\r\n        const queryString = \"?mealId=\" + (this.props.mealId);\r\n        const url = \"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/payment/\" + queryString;\r\n        console.log(url);\r\n\r\n\r\n        $.ajax({\r\n            url: url,\r\n            type: 'GET',\r\n            headers: {\r\n                accept: \"application/json\",\r\n            },\r\n            success: async function(response) {\r\n                console.log(response);\r\n                const client_secret = response.client_secret;\r\n\r\n                const result = await stripe.confirmCardPayment(client_secret, {\r\n                    // Gets a reference to a mounted CardElement. Elements knows how\r\n                    // to find your CardElement because there can only ever be one of\r\n                    // each type of element.\r\n                    payment_method: {\r\n                        card: elements.getElement(CardElement),\r\n                        billing_details: {\r\n                            name: \"John Doe\" \r\n                        }\r\n                    }\r\n                });\r\n        \r\n                if (result.error) {\r\n                    console.log(result.error.message);\r\n                    // Show error prompt\r\n                } else {\r\n                    if (result.paymentIntent.status === 'succeeded') {\r\n                        console.log(meal);\r\n                        console.log(meal.mealID);\r\n                        console.log(meal.mealImagePath);\r\n                        console.log(meal.mealName);\r\n                        console.log(meal.mealPrice);\r\n\r\n                        console.log(localStorage.getItem(\"email\").split('.').join('_DOT_')); // meal poster eamil\r\n                        console.log(user.displayname);\r\n                        console.log(user.email.split('.').join('_DOT_'));\r\n\r\n                        var myRef = firebase.database().ref('requests');\r\n                        var key = myRef.push().getKey();\r\n                        console.log(\"Key: \" + key);\r\n                        myRef.child(key).set({\r\n                            meal_id: key,\r\n                            meal_imgsrc: meal.mealImagePath,\r\n                            meal_name: meal.mealName,\r\n                            meal_price: meal.mealPrice,\r\n                            response: \"pending\",\r\n                            seller_displayname: posterName,\r\n                            seller_email: meal.poster.split('.').join('_DOT_'),\r\n                            buyer_displayname: user.displayname, \r\n                            // buyer_email: user.email.split('.').join('_DOT_')\r\n                            buyer_email: localStorage.getItem(\"email\").split('.').join('_DOT_')\r\n                        }).then((snap)=>{\r\n                            console.log(\"What is the value of the key?: \" + key);\r\n                            // firebase.database().ref('users/' + meal.poster.replace(\".\", \"_DOT_\")).child(\"purchase_requests\").child(key).set(true);\r\n                            // firebase.database().ref('users/' + user.email.replace(\".\", \"_DOT_\")).child(\"purchase_requests\").child(key).set(true);\r\n                            firebase.database().ref('users/' + meal.poster.split('.').join('_DOT_')).child(\"purchase_requests\").child(key).set(true);\r\n                            firebase.database().ref('users/' + localStorage.getItem(\"email\").split('.').join('_DOT_')).child(\"purchase_requests\").child(key).set(true);\r\n                        });\r\n\r\n                        // Show success prompt\r\n                        console.log(\"Payment succeeded\");\r\n                        window.setTimeout(null, 3000);\r\n                        window.location.href = \"/\";\r\n                    }\r\n                }\r\n            }, \r\n            error: function(error) {\r\n                // Show error prompt\r\n                console.log(`Error: ${error}`);\r\n            }\r\n        })\r\n    };\r\n\r\n\r\n    render() {\r\n        const {stripe} = this.props;\r\n\r\n        return (\r\n                <form id=\"paymentSubmit\" className=\"collapse mx-auto p-3 border border-secondary rounded\" onSubmit={this.handleSubmit}>\r\n                    <CardElement \r\n                        options={{\r\n                            style: {\r\n                                base: {\r\n                                    fontSize: '20px',\r\n                                    color: '#424770',\r\n                                    '::placeholder': {\r\n                                        color: '#aab7c4',\r\n                                    },\r\n                                },\r\n                            },\r\n                            invalid: {\r\n                                color: '#9e2146',\r\n                            },\r\n                        }}\r\n                    />\r\n                    <button id=\"paymentSubmitButton\" type=\"submit\" disabled={!stripe} >\r\n                        Pay\r\n                    </button>\r\n                </form>\r\n        )\r\n    }\r\n} \r\n\r\nexport default CheckoutForm;","'use strict';\r\n\r\nimport React, { Component } from \"react\";\r\n// import InputField from \"./component/input-field\";\r\n// import $ from \"jquery\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\n\r\nimport { Elements, ElementsConsumer } from '@stripe/react-stripe-js';\r\nimport { loadStripe } from '@stripe/stripe-js';\r\n\r\nimport CheckoutForm from './CheckoutForm'; \r\n\r\nconst stripePromise = loadStripe(\"pk_test_kZQuSeuPP44KCF82f1BV8s7I00uch6juFm\");\r\n\r\nclass ListingPage extends Component {\r\n    render() {\r\n        let meal = this.props.meal;\r\n        let mealTags = [];\r\n        let allergies = [];\r\n\r\n        if (meal.mealTags) {\r\n            mealTags = meal.mealTags.map((tag) => {\r\n                return <div className=\"mx-1\">{tag}</div>\r\n            });\r\n        }\r\n        if (meal.allergens) {\r\n            allergies = meal.allergens.map((allergy) => {\r\n                return <div className=\"mx-1\">{allergy}</div>\r\n            });\r\n        } \r\n\r\n        return (\r\n            <React.Fragment>\r\n                <div id=\"viewListing\" className=\"container w-100\" style={{'margin':'10vh auto'}}>\r\n                    {/* Top Half */}\r\n                    <div className=\"column border bg-light pt-2\" id=\"photo-and-description\">\r\n                        <h2 id=\"title\" className=\"mt-4 mb-2 pl-5\"></h2>\r\n                        <div className=\"border-top row mx-0\"> \r\n                            <div id=\"image\" className=\"column w-50 file-field\">\r\n                                <img src={meal.mealImagePath} alt={meal.imgAlt}\r\n                                        className=\"my-0 mx-auto d-block\" style={{'maxWidth': '50%'}} alt=\"example placeholder\" />\r\n                            </div>\r\n                            <div id=\"description\" className=\"column w-50 p-4\">\r\n                                <div className=\"border p-2\">\r\n                                    <h3>{meal.mealName}</h3>\r\n                                    <div>\r\n                                        {meal.mealDescription}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        {/* Bottom Half */}\r\n                        <div id=\"tags\" className=\"border-top px-4 row mx-0\">\r\n                            <div className=\"w-50 col\">\r\n                                <div className=\"my-4\">\r\n                                    <div className=\"ml-4 text-secondary\">Tags</div>\r\n                                    <div className=\"mx-2 border-top container\">\r\n                                        <div className=\"mx-1 d-flex row\">\r\n                                            {mealTags}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            <div className=\"my-4\">\r\n                                <div className=\"ml-4 text-secondary\">Allergies</div>\r\n                                <div className=\"mx-2 border-top container\">\r\n                                    <div className=\"row mx-1\">\r\n                                        {allergies}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        {/* Purchase Form */}\r\n                        <div className=\"w-50 py-4\">\r\n                            <div id=\"purchase-form\" className=\"border w-75 mx-auto py-2 bg-light\" style={{zIndex: 1, position: 'relative', top: '-10vh'}}>\r\n                                <div className=\"row mt-1 mx-0 px-3 pb-2 align-content-between\">\r\n                                    <div className=\"column w-50\">\r\n                                        <img src=\"/imgs/profile_default.jpg\" className=\"rounded-circle\" style={{height: '40px'}} alt=\"profile\"></img>\r\n                                        <div>{meal.poster}</div>\r\n                                    </div>\r\n                                    <div className=\"column w-50 align-self-center\">\r\n                                        <div id=\"price\" className=\"align-self-center\">${meal.mealPrice} per item</div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"border-top column pt-2 px-2\">\r\n                                    <div className=\"row mx-0 justify-content-end px-2\">\r\n                                        <div className=\"border py-1 px-4 w-50\">\r\n                                            <div className=\"text-secondary\" style={{fontSize: \"11px\"}}>Quantity</div>\r\n                                            <div className=\"ml-1\" style={{fontSize: \"18px\"}}>{meal.mealQuantity}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div className=\"row mx-0 mt-2\">\r\n                                        <button className=\"btn btn-secondary mx-auto w-75\">Message Seller</button>\r\n                                    </div>\r\n                                    <div className=\"row mx-0 mt-2\" data-toggle=\"collapse\" data-target=\"#paymentSubmit\" aria-expanded=\"false\">\r\n                                        <button className=\"btn btn-primary mx-auto w-75\">Request Purchase</button>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                </div>\r\n                <Elements stripe={stripePromise} >\r\n                    <ElementsConsumer>\r\n                        {({elements, stripe}) => (\r\n                            <CheckoutForm elements={elements} stripe={stripe} mealId={this.props.meal.mealID} \r\n                            meal={this.props.meal} user={this.props.user}/>\r\n                        )}\r\n                    </ElementsConsumer>\r\n                </Elements>\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\n\r\nexport default ListingPage;","import React, { Component } from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\n\r\n// TODO: Make modal more responsive/robust for inputs \r\n\r\nclass ListingModal extends Component {\r\n    render() {\r\n        let meal = this.props.meal;\r\n\r\n        return(\r\n            <div className=\"modal fade\" id=\"exampleModalCenter\" tabIndex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalCenterTitle\" aria-hidden=\"true\">\r\n                <div className=\"modal-dialog\" role=\"document\">\r\n                    <div className=\"modal-content\" style={{'backgroundImage':  'url(' + meal.mealImagePath + ')', 'backgroundSize': '120%'}}>\r\n                        <div className=\"modal-body text-white px-0 py-0 w-100\" style={{height: '500px', width: '500px'}} >\r\n                            <div className=\"modal-text mx-0 pl-3 pt-3 row d-flex align-content-between\">\r\n                                <div className=\"col-6\">\r\n                                    <div id=\"modal-name\" className=\"font-weight-light mb-1\" style={{'fontSize': \"20px\"}}>\r\n                                        {meal.mealName}\r\n                                    </div>\r\n                                    <div id=\"modal-location\" className=\"row mx-0\">\r\n                                        <i className=\"fas fa-map-marker-alt\"></i>\r\n                                        <div className=\"row mx-0\">\r\n                                        <div className=\"ml-2\">Seattle, WA</div> <div className=\"ml-2\">0.8 miles</div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div id=\"modal-price\" className=\"font-weight-bold\">\r\n                                        Price: ${meal.mealPrice}\r\n                                    </div>\r\n                                    </div>\r\n                                    <div className=\"col-6 text-right\">\r\n                                    <div className=\"mb-2\">\r\n                                        Description: {meal.mealDescription}\r\n                                    </div>\r\n                                    <NavLink to=\"/listing\">\r\n                                        <button className=\"btn btn-info\" data-toggle=\"modal\" data-target=\"#exampleModalCenter\">\r\n                                            View Listing\r\n                                        </button>\r\n                                    </NavLink>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default ListingModal;","import React, { Component } from \"react\";\r\n// import ListGroup from \"react-bootstrap/ListGroup\";\r\n\r\nclass CardList extends Component {\r\n  render() {\r\n    let foodCards = this.props.foodItems.map((foodItem, index) => {\r\n      let card = (\r\n        <FoodCard\r\n          key={foodItem.mealID}\r\n          id={foodItem.mealID}\r\n          name={foodItem.mealName}\r\n          price={foodItem.mealPrice}\r\n          description={foodItem.mealDescription}\r\n          imgUrl={foodItem.mealImagePath}\r\n          imgAlt={foodItem.imgAlt}\r\n\r\n          getMealFunc={this.props.getMealById}\r\n        />\r\n      );\r\n\r\n      return card;\r\n    });\r\n\r\n    return (\r\n      <div className=\"container mt-5 py-3 px-0\">\r\n        <div className=\"row justify-content-center mx-0 listing-group\">{foodCards}</div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass FoodCard extends Component {\r\n  render() {\r\n    const { name, price, imgUrl, imgAlt } = this.props;\r\n    return (\r\n      <span className=\"mt-3 px-0 listing\">\r\n        <img\r\n          src={imgUrl}\r\n          alt={imgAlt}\r\n          className=\"w-100 h-100\"\r\n          \r\n          onClick = {() => this.props.getMealFunc(this.props.id)}\r\n          data-toggle=\"modal\"\r\n          data-target=\"#exampleModalCenter\"\r\n        />\r\n        <div id=\"card-text\" className=\"cardText pl-2 pt-1 w-100\">\r\n          <div className=\"text-left\">\r\n            <div className=\"\">\r\n              {name}\r\n            </div>\r\n            <div className=\"font-weight-bold pt-1 pl-1\">\r\n              ${price}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CardList;\r\n","import React, {Component} from 'react';\r\n\r\nclass SideBar extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <div id=\"sidebar\" className=\"sidebar\" style={{width: '230px', 'marginTop': '0px', 'backgroundColor':'#393D3F', position: 'fixed', right: '0px'}}>\r\n                <div id=\"sidebar-header\" className=\"py-3\" style={{color: 'white', height: '130px', 'backgroundColor': '#282A2C'}} >\r\n                    <div id=\"user_info\" className=\"row ml-0 mr-0\">\r\n                        <img src=\"imgs/profile_default.jpg\" className=\"rounded-circle ml-2 my-1 column\" style={{height: '40px'}} alt=\"profile\"/>\r\n                        <div className=\"column\" id=\"\" style={{'fontSize': '16px'}}>\r\n                            <div id=\"username\" className=\"row ml-3 mr-0\">GermanSausageMan</div>\r\n                            <div  id=\"location\" className=\"row ml-3 mr-0\" style={{'fontSize': '14px'}}>\r\n                                <i className=\"fas fa-map-marker-alt\"></i>\r\n                                <div className=\"ml-2\">Seattle, WA</div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <hr className=\"mt-3 mb-0\" style={{'backgroundColor': '#D8D8D8', 'opacity': '15%'}} />\r\n                    <div id=\"tabs\" className=\"row mx-0\" style={{'marginTop': 'auto', height: '51%'}} >\r\n                        <div className=\"column px-3 mr-1 border-right pt-2\">\r\n                            <i className=\"fas fa-sign-out-alt mt-2 mx-2\"></i>\r\n                        </div>\r\n                        <div className=\"column pl-2 mr-1 pr-3 pt-2 border-right\" style={{'fontSize': '12px'}}>\r\n                            <div>Followers</div>\r\n                            <div>210</div>\r\n                        </div>\r\n                        <div className=\"column pl-2 pt-2\" style={{'fontSize': '12px'}}>\r\n                            <div>Following</div>\r\n                            <div>200</div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div id=\"sidebar-list\" className=\"container px-0 listings\" style={{color: 'white'}}>\r\n                    <div className=\"text-center font-weight-bold mt-2 py-1\">My Listings</div>\r\n                    \r\n                    <hr className=\"mt-2 mb-0\" style={{'backgroundColor': '#D8D8D8', opacity: '15%'}} />\r\n                    <div className=\"pl-3 pt-1 ml-2\">Pending</div>\r\n                    <div className=\"row mx-0\">\r\n                        <div className=\"column ml-3\">\r\n                            <img src=\"imgs/makisushi.jpg\" style={{width:'115px',height:'115px'}} alt=\"good sushi\" />\r\n                        </div>\r\n                        <div className=\"column pl-2\">\r\n                            <div>Sushi</div>\r\n                            <div className=\"font-weight-bold\">$4.25</div>\r\n                        </div>\r\n                    </div>\r\n                   \r\n                    <hr className=\"mt-3 mb-0\" style={{'backgroundColor': '#D8D8D8', opacity: '15%'}} />\r\n                    <div className=\"pl-3 pt-1 ml-2\">Current Listings</div> \r\n                    <div className=\"row mx-0\">\r\n                        <div className=\"column ml-3\">\r\n                            <img src=\"imgs/itsapizza.jpg\" style={{width:'115px',height:'115px'}} alt=\"good sushi\" />\r\n                        </div>\r\n                        <div className=\"column pl-2\">\r\n                            <div>Not Sushi</div>\r\n                            <div className=\"font-weight-bold\">$8.25</div>\r\n                        </div>\r\n                    </div>\r\n                  \r\n                    <hr className=\"mt-3 mb-0\" style={{'backgroundColor': '#D8D8D8', opacity: '15%'}} />\r\n                    <div className=\"pl-3 pt-1 ml-2\">History</div>  \r\n                    <div className=\"row mx-0\">\r\n                        <div className=\"column ml-3\">\r\n                            <img src=\"imgs/lasagna.jpg\" style={{width:'115px',height:'115px'}} alt=\"good sushi\" />\r\n                        </div>\r\n                        <div className=\"column pl-2\">\r\n                            <div>Lasagna</div>\r\n                            <div className=\"font-weight-bold\">$4.20</div>\r\n                        </div>\r\n                    </div>\r\n                    <div id=\"sidebar-buttons\" className=\"row mx-0 border-top\" style={{'fontSize': '28px', position: 'absolute', bottom: 0}} >\r\n                        <div className=\"column px-4 py-2 border-right\">\r\n                            <i className=\"fas fa-plus\"></i>\r\n                        </div>\r\n                        <div className=\"column px-4 py-2 border-right\" >\r\n                            <i className=\"far fa-grin-beam-sweat\"></i>\r\n                        </div>\r\n                        <div className=\"column px-4 py-2\" >\r\n                            <i className=\"fas fa-cog\"></i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default SideBar;","import React, { Component } from \"react\";\r\nimport InputField from \"./input-field\";\r\nimport CurrencyInput from 'react-currency-input';\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"../styles/style.css\";\r\nimport NavBar from \"./NavBar\";\r\nimport Tags from \"./Tags\";\r\nimport AWS from 'aws-sdk';\r\nimport $ from 'jquery';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n\r\n// var AWS = require(\"aws-sdk\");\r\n\r\nAWS.config.region = 'us-west-2';\r\nAWS.config.credentials = new AWS.CognitoIdentityCredentials({\r\n    IdentityPoolId: 'us-west-2:cb1b59d8-6d8b-4d56-a187-5b91922f84d7',\r\n});\r\n\r\nvar bucketName = \"foodimagebucket\";\r\nvar bucketRegion = \"us-west-2\";\r\nvar IdentityPoolId = \"us-west-2:b8d920b2-21d8-4843-80a3-9dadec543d92\";\r\nvar fileName = \"\";\r\n\r\nAWS.config.update({\r\n    region: bucketRegion,\r\n    credentials: new AWS.CognitoIdentityCredentials({\r\n        IdentityPoolId: IdentityPoolId\r\n        })\r\n});\r\n\r\nconst s3 = new AWS.S3({\r\n    apiVersion: \"2006-03-01\",\r\n    params: {Bucket: bucketName}\r\n});\r\n\r\nclass UpdateItemPage extends Component {\r\n    \r\n    constructor(props) {\r\n        super(props);\r\n\r\n        let mealIn = this.props.meal; \r\n        let mealId = localStorage.getItem(\"mealID\");\r\n\r\n\r\n        this.state = {\r\n            mealName:\"\",\r\n            mealImagePath:\"\",\r\n            mealQuantity:\"\",\r\n            mealDescription:\"\",\r\n            amount: 0.00,\r\n            mealTags: [],\r\n            ingredientTags: [],\r\n            allergyTags: [],\r\n            mealID: localStorage.getItem(\"mealID\"),\r\n            curMeal: {}\r\n        };\r\n        \r\n        // this.handleChange = this.handleChange.bind(this);\r\n        this.handleDescriptionChange = this.handleDescriptionChange.bind(this);\r\n        this.handleNameChange = this.handleNameChange.bind(this);\r\n        this.handleQuantityChange = this.handleQuantityChange.bind(this);\r\n        this.handleValueChange = this.handleValueChange.bind(this);\r\n        this.fillFields = this.fillFields.bind(this);\r\n\r\n        this.mealNameInput = React.createRef();\r\n        this.mealPriceInput = React.createRef();\r\n        this.mealDescriptionInput = React.createRef();\r\n        this.mealQuantityInput = React.createRef();\r\n        this.mealTagsInput = React.createRef();\r\n        this.mealIngredientsInput = React.createRef();\r\n        this.mealAllergyInput = React.createRef();\r\n        \r\n\r\n        this.s3Url = '';\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.fillFields();\r\n        this.render();\r\n        console.log(\"MOUNT\");\r\n    }\r\n\r\n    /*load user postings from database*/\r\n    loadPostings = mealID  => {\r\n        var mealId = String(mealID).trim();\r\n        var pathParam = \"/listings/\" + mealId;\r\n        var Url=\"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/pj_stage_01\";\r\n        Url = Url.concat(pathParam);\r\n\r\n        return $.ajax({\r\n            url: Url,\r\n            type: 'GET',\r\n            crossDomain: true, \r\n            contentType: 'application/json',\r\n            dataType: 'json',\r\n            \r\n            success: function(data) {\r\n                console.log(\"Success finding meal info: \\n\"+JSON.stringify(data));\r\n            },   \r\n            error:function(error) {\r\n                console.log(error); \r\n            }\r\n        });\r\n    }\r\n        \r\n    \r\n\r\n    fillFields(){\r\n        console.log(\"Trying to fill the fields\");\r\n        this.loadPostings(this.state.mealID)\r\n            .then((meal)=>{\r\n                this.setState({curMeal:meal.Item});\r\n                console.log(\"MEAL IN FILL FIELDS: \"+ JSON.stringify(this.state.curMeal));\r\n                this.setState({mealName:this.state.curMeal.mealName});\r\n                this.setState({mealImagePath:this.state.curMeal.mealImagePath});\r\n                this.setState({mealDescription:this.state.curMeal.mealDescription});\r\n                this.setState({mealTags:this.state.curMeal.mealTags});\r\n                this.setState({allergyTags:this.state.curMeal.allergens});\r\n                this.setState({ingredientTags:this.state.curMeal.ingredients});\r\n                this.setState({amount:this.state.curMeal.mealPrice});\r\n                this.setState({mealQuantity:this.state.curMeal.mealQuantity});\r\n            });\r\n        \r\n\r\n        console.log(\"curMeal: \\n\"+JSON.stringify(this.state.curMeal));\r\n    }\r\n    //Change handlers\r\n    handleDescriptionChange = (event) => {\r\n        this.setState({mealDescription:event.target.value});\r\n    }\r\n    handleNameChange = (event) => {\r\n        this.setState({mealName:event.target.value});\r\n    }\r\n    handleQuantityChange = (event) => {\r\n        this.setState({mealQuantity:event.target.value});\r\n    }\r\n    handleValueChange(event, maskedvalue, floatvalue){\r\n        this.setState({amount: maskedvalue});\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        console.log(\"I have rendered the UpdateItemPage\");\r\n        const{\r\n            updateMealTags\r\n        } = this.props;\r\n        // let meal = this.state.curMeal;\r\n        return (\r\n            <div class=\"mt-2 p-4\">\r\n                <NavBar></NavBar>\r\n                <InputField labelName=\"What is your meal?\" placeHolder={this.state.mealName} input={this.mealNameInput} onChange = {this.handleNameChange}/>\r\n\r\n                <div class=\"row justify-content-center p-4 border bg-light\" id=\"photo-and-description\">\r\n\r\n                    <form class=\"md-form w-50 p-4\">\r\n                        {/* <div class=\"file-field\">\r\n                            <div class=\"z-depth-1-half mb-4\">\r\n                                <img id=\"FoodImage\" src=\"https://mdbootstrap.com/img/Photos/Others/placeholder.jpg\" class=\"img-fluid\"\r\n                                    alt=\"example placeholder\"></img>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"d-flex justify-content-center\">\r\n                            <div class=\"btn btn-mdb-color btn-rounded float-left\">\r\n                                <span>Choose file</span>\r\n                                <input type=\"file\" id=\"photoFile\"></input>\r\n                            </div>\r\n                        </div> */}\r\n\r\n                        <label htmlFor=\"mealTags\">Meal Tags:</label>\r\n                        <Tags id=\"mealTags\" updateMealTags={this.updateMealTags} />\r\n\r\n                        <label htmlFor=\"ingredientTags\">Ingredients:</label>\r\n                        <Tags id=\"ingredientTags\" updateMealTags={this.updateIngredientTags} />\r\n\r\n                        <label htmlFor=\"allergyTags\">Allergies:</label>\r\n                        <Tags id=\"allergyTags\" updateMealTags={this.updateAllergyTags} />\r\n\r\n                    </form>\r\n\r\n                    <div label=\"right column\" class=\"w-50 p-4\">\r\n                        <div label=\"food-description\">\r\n                            <label htmlFor=\"foodDescriptionBox\">Food Description</label>\r\n                    <textarea class=\"form-control rounded-0\" id=\"foodDescriptionBox\" rows=\"10\" ref={this.mealDescriptionInput} placeholder = {this.state.mealDescription} onChange = {this.handleDescriptionChange}></textarea>\r\n                        </div>\r\n\r\n                        <label htmlFor=\"price\">Price:</label>\r\n\r\n                        <div>\r\n                            <CurrencyInput value={this.state.amount} onChangeEvent={this.handleValueChange}/>\r\n                        </div>\r\n\r\n                        <InputField labelName=\"Quantity\" placeHolder={this.state.mealQuantity} input={this.mealQuantityInput} onChange={this.handleQuantityChange} />\r\n\r\n                        <button class=\"btn btn-success mt-4\" type=\"button\" onClick={() => this.handleAddMeal()} >Submit Listing</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    addPhoto = async() => {\r\n        var files = document.getElementById(\"photoFile\").files;\r\n        if (!files.length){\r\n            return alert(\"Please choose a file to upload first.\");\r\n        }\r\n        var file = files[0];\r\n        fileName = file.name;\r\n\r\n        var params = {\r\n            Body: file,\r\n            Bucket: bucketName,\r\n            Key: fileName,\r\n            // ACL: 'public-read',\r\n        }\r\n\r\n        s3.putObject(params, function(err, data) {\r\n            if(err) console.log(err, err.stack); //An error occured\r\n            else console.log(data); //Succesful upload\r\n        })\r\n    };\r\n\r\n    updateMealTags = (tags) => {\r\n        this.setState({ mealTags: tags.map((tag) => tag.toLowerCase()) });\r\n    };\r\n    updateIngredientTags = (tags) => {\r\n        this.setState({ ingredientTags: tags.map((tag) => tag.toLowerCase()) });\r\n    };\r\n    updateAllergyTags = (tags) => {\r\n        this.setState({ allergyTags: tags.map((tag) => tag.toLowerCase()) });\r\n    };\r\n\r\n    handleAddMeal = async () => {\r\n        \r\n        // var testID = uuidv4();\r\n        // console.log(testID);\r\n\r\n        // var fileUrl = this.addPhoto();\r\n        \r\n        var email = localStorage.getItem(\"email\");\r\n        console.log(email);\r\n\r\n        const mealUrl =\r\n            \"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/listings\";\r\n\r\n        const _data = {\r\n            mealID: this.state.mealID,\r\n            mealDescription: this.state.mealDescription,\r\n            mealImagePath: this.state.mealImagePath,\r\n            mealName: this.state.mealName,\r\n            mealPrice: this.state.amount,\r\n            mealQuantity: this.state.mealQuantity,\r\n            mealTags: this.state.mealTags,\r\n            mealIngredients: this.state.ingredientTags,\r\n            mealAllergy: this.state.allergyTags,\r\n            userEmail: localStorage.getItem(\"email\")\r\n        };\r\n\r\n        console.log(\"The value of _data:\\n\"+JSON.stringify(_data));\r\n\r\n        //Puts the meal information into the database\r\n        $.ajax({\r\n            url: mealUrl,\r\n            type: \"POST\",\r\n            // dataType: \"jsonp\",\r\n            headers: {\r\n                accept: \"application/json\",\r\n            },\r\n            crossDomain: true,\r\n            data: JSON.stringify(_data),\r\n            // dataType: \"json\",\r\n            // contentType: \"application/json; charset=utf-8\",\r\n            success: function (result) {\r\n                console.log(\"Meal table MealPut success\\n\")\r\n                console.log(result);\r\n            },\r\n            error: function (xhr, status, error) {\r\n                console.log(\"Meal table MealPut failure\");\r\n                console.log(JSON.stringify(xhr));\r\n            }\r\n        });\r\n\r\n        return false;\r\n    };\r\n\r\n}\r\n\r\nexport default UpdateItemPage;","import React, { Component } from \"react\";\r\nimport { Link } from 'react-router-dom';\r\nimport { Auth, JS } from \"aws-amplify\";\r\nimport $ from 'jquery';\r\nimport firebase from 'firebase';\r\n\r\n\r\nclass SignUpForm extends Component{\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.state = {\r\n      firstName: '',\r\n      lastName: '',\r\n      username: '',\r\n      email:'', //UUID\r\n      firstName:'',\r\n      lastName:'',\r\n      city:'',\r\n      state:'',\r\n      street:'',\r\n      zip:'',\r\n      code: '',\r\n      step: 0\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.updateFirstName = this.updateFirstName.bind(this);\r\n    this.updateLastName = this.updateLastName.bind(this);\r\n    this.updateUserName = this.updateUserName.bind(this);\r\n    this.updateLocation = this.updateLocation.bind(this);\r\n    this.updateCode = this.updateCode.bind(this);\r\n\r\n    this.Sign_Up = this.Sign_Up.bind(this);\r\n    this.Confirm_Sign_Up = this.Confirm_Sign_Up.bind(this);\r\n\r\n    this.Check_If_User_Exists_In_DB = this.Check_If_User_Exists_In_DB.bind(this);\r\n    this.handleCreateNewUser = this.handleCreateNewUser.bind(this);\r\n  }\r\n\r\n/* UPDATES */\r\n    updateFirstName(event){\r\n      this.setState({\r\n        firstName: event.target.value\r\n      });\r\n    }\r\n    updateLastName(event){\r\n      this.setState({\r\n        lastName: event.target.value\r\n      });\r\n    }\r\n    updateUserName(event){\r\n      this.setState({\r\n        username: event.target.value\r\n      });\r\n    }\r\n    updateLocation(event){\r\n      this.setState({\r\n        location: event.target.value\r\n      });\r\n    }\r\n    updateCode(event){\r\n      this.setState({\r\n        code: event.target.value\r\n      });\r\n    }\r\n\r\n   handleChange(event){\r\n        let target = event.target; //select target element\r\n        let value = target.type === 'checkbox' ? target.checked : target.value;//value of the input eg. \"pj@gmail.com\"\r\n        let name = target.name; //name attribute of the inputs eg. \"email\"\r\n\r\n        this.setState({\r\n            [name]: value //eg. \"email\": \"pj@gmail.com\"\r\n        });\r\n    }\r\n/* EOF UPDATES */\r\n\r\n\r\n  async Sign_Up(event){\r\n      event.preventDefault();\r\n\r\n      var email = this.state.email;\r\n      var password = this.state.password;\r\n      console.log(\"what is email: \",email);\r\n      console.log(\"what is password: \" ,password);\r\n\r\n      try{\r\n        await Auth.signUp({username: email, password: password,});\r\n        console.log(\"Signed up successfully!\");\r\n        this.handleCreateNewUser();\r\n        this.setState({ step: 1 });\r\n      }catch(err){\r\n        console.log(\"Error signing up: \", err);\r\n      }\r\n    }\r\n\r\n    async Confirm_Sign_Up(event){\r\n      event.preventDefault();\r\n\r\n      var email = this.state.email;\r\n      var code = this.state.code;\r\n\r\n      try{\r\n        await Auth.confirmSignUp(email, code);\r\n        console.log(\"Successfully confirmed signup!\");\r\n\r\n        //putting the rest of the user information into dynamo db\r\n        // var result = await this.Check_If_User_Exists_In_DB(); \r\n        // console.log(\"The result after checking if exists: \"+result);\r\n        // console.log(\"Count of the result: \"+result.Count);\r\n        // if(result != null && result.Count === 0){\r\n        //   console.log(\"User does not exists. Creating new user.\");\r\n          this.handleCreateNewUser();\r\n        // }else{\r\n        //   console.log(\"User already exists. Unable to create new user.\");\r\n        // }\r\n\r\n        //putting user information to firebase\r\n        var myRef = firebase.database().ref('users');\r\n        var firebaseEmail = this.state.email;\r\n        firebaseEmail = firebaseEmail.split('.').join('_DOT_');\r\n        // var firebaseEmail = this.state.email.replace(/./g,\"_DOT_\"); //firebase cannot store ids containing special characters such as .\r\n        console.log(\"FIREBASE EMAIL\"+firebaseEmail);\r\n        myRef.child(firebaseEmail).set({\r\n            imgsrc: \"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcTXIqGqYQQW5zSXHNxhx1ZzvNgj4W7xDosW0ERkkoHwX94HMwbv&usqp=CAU\", //default imgsrc\r\n            email: firebaseEmail,\r\n            displayname: this.state.username\r\n        })\r\n      \r\n        this.setState({ step: 0 });\r\n      }catch(err){\r\n        console.log(\"Unable to confirm sign up: \", err);\r\n      }\r\n    }\r\n\r\n    handleCreateNewUser = async () => { \r\n      console.log(\"Trying to add user to DB\");\r\n      const Url=\"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/pj-stage-login-v2/user\";\r\n      const _data={\r\n        \"firstname\": this.state.firstName,\r\n        \"lastname\": this.state.lastName,\r\n        \"username\": this.state.username,\r\n        \"email\": this.state.email,\r\n        \"location\": this.state.location,\r\n        \"hasAgreedToTerms\": this.state.hasAgreedToTerms\r\n      }\r\n  \r\n      $.ajax({\r\n        url: Url,\r\n        type: 'POST',\r\n        crossDomain: true, \r\n        contentType: 'application/json',\r\n        // dataType: 'json',\r\n        // headers:{\r\n        //     \"accept\": \"application/json\",\r\n        //     // \"Access-Control-Allow-Origin\": '*'\r\n        // },\r\n        data: JSON.stringify(_data),\r\n  \r\n        success: function(result) {\r\n          console.log(\"Successfully created new user\");\r\n        }, \r\n        error:function(error) {\r\n          console.log(\"Unable to create new user: \" + error); \r\n        }\r\n      });\r\n      return false;\r\n    }\r\n\r\n    Check_If_User_Exists_In_DB = async () => {                 \r\n      var queryString = \"/email/?email=\" + String(this.state.email);\r\n      console.log(\"The email we are checking to see if it is in the DB: \"+queryString);\r\n      var Url = \"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/pj-stage-login-v2\"\r\n      Url = Url.concat(queryString);\r\n\r\n      return $.ajax({\r\n          url: Url,\r\n          type: 'GET',\r\n          crossDomain: true, \r\n          contentType: 'application/json',\r\n          dataType: 'json',\r\n          header:{\r\n              \"accept\": \"application/json\",\r\n               \"Access-Control-Allow-Origin\": '*'\r\n          },\r\n          \r\n          success: function(result){\r\n            console.log(\"Inside AJAX\");\r\n            console.log(result.toString());\r\n            console.log(result.valueOf(\"length\"));\r\n          },\r\n          error: function(error){\r\n            console.log(error);\r\n          }\r\n      })\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return(\r\n            <div className=\"FormCenter\">\r\n              {\r\n                this.state.step === 0 && (\r\n                \r\n                  <form className=\"FormFields\" onSubmit={this.Sign_Up}>\r\n                    \r\n                    <div className=\"FormField\">\r\n                      <label className=\"FormField__Label\" htmlFor=\"firstName\">First Name</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        id=\"firstName\"\r\n                        className=\"FormField__Input\"\r\n                        placeholder=\"Enter your first name\"\r\n                        name=\"firstName\"\r\n                        required=\"required\"\r\n                        value={this.state.firstName}\r\n                        onChange={this.updateFirstName.bind(this)}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"FormField\">\r\n                      <label className=\"FormField__Label\" htmlFor=\"lastName\">Last Name</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        id=\"lastName\"\r\n                        className=\"FormField__Input\"\r\n                        placeholder=\"Enter your last name\"\r\n                        name=\"lastName\"\r\n                        required=\"required\"\r\n                        value={this.state.lastName}\r\n                        onChange={this.updateLastName.bind(this)}\r\n                        />\r\n                    </div>\r\n\r\n\r\n                    <div className=\"FormField\">\r\n                      <label className=\"FormField__Label\" htmlFor=\"email\">Email Address</label>\r\n                      <input\r\n                        type=\"email\"\r\n                        id=\"email\"\r\n                        className=\"FormField__Input\"\r\n                        placeholder=\"Enter your Email Address\"\r\n                        name=\"email\"\r\n                        required=\"required\"\r\n                        value={this.state.email}\r\n                        onChange={this.handleChange}/>\r\n                    </div>\r\n\r\n                    \r\n                    <div className=\"FormField\">\r\n                      <label className=\"FormField__Label\" htmlFor=\"username\">Username</label>\r\n                      <input\r\n                        type=\"username\"\r\n                        id=\"username\"\r\n                        className=\"FormField__Input\"\r\n                        placeholder=\"Choose a username\"\r\n                        name=\"username\"\r\n                        required=\"required\"\r\n                        value={this.state.username}\r\n                        onChange={this.updateUserName.bind(this)}/>\r\n                    </div>\r\n                    \r\n                    <div className=\"FormField\">\r\n                      <label className=\"FormField__Label\" htmlFor=\"password\">Password</label>\r\n                      <input\r\n                        type=\"password\"\r\n                        id=\"password\"\r\n                        className=\"FormField__Input\"\r\n                        placeholder=\"Enter your password\"\r\n                        name=\"password\"\r\n                        required=\"required\"\r\n                        value={this.state.password}\r\n                        onChange={this.handleChange}/>\r\n                    </div>\r\n\r\n                    <div className=\"FormField\">\r\n                      <label className=\"FormField__Label\" htmlFor=\"city\">City</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        id=\"city\"\r\n                        className=\"FormField__Input\"\r\n                        placeholder=\"Enter your city\"\r\n                        name=\"city\"\r\n                        required=\"required\"\r\n                        value={this.state.location}\r\n                        onChange={this.updateLocation.bind(this)}/>\r\n                    </div>\r\n                    \r\n                    <div className=\"FormField\">\r\n                      <label className=\"FormField__CheckboxLabel\">\r\n                        <input\r\n                          className=\"FormField__Checkbox\"\r\n                          type=\"checkbox\"\r\n                          name=\"hasAgreed\"\r\n                          required=\"required\"\r\n                          value={this.state.hasAgreedToTerms}\r\n                          onChange={this.handleChange}/>\r\n\r\n                          I agree to the statements in <a href=\"a\" className=\"FormField__TermsLink\">terms of service</a>\r\n                      </label>\r\n                    </div>\r\n\r\n                    <div className=\"FormField\">\r\n                      <button className=\"FormField__Button mr-20\"> Sign Up</button>\r\n                      <Link to=\"/sign-in\" className=\"FormField__Link\">I'm already a member</Link>\r\n                    </div>\r\n                  </form>\r\n              \r\n                  )\r\n                }\r\n                {\r\n                this.state.step === 1 && (\r\n                \r\n                  <form className=\"FormFields\" onSubmit={this.Confirm_Sign_Up}>\r\n   \r\n                    <div className=\"FormField\">\r\n                      <label className=\"FormField__Label\" htmlFor=\"email\">Email Address</label>\r\n                      <input\r\n                        type=\"email\"\r\n                        id=\"email\"\r\n                        className=\"FormField__Input\"\r\n                        placeholder=\"Enter your Email Address\"\r\n                        name=\"email\"\r\n                        required=\"required\"\r\n                        value={this.state.email}\r\n                        onChange={this.handleChange.bind(this)}/>\r\n                    </div>\r\n                    \r\n                    <div className=\"FormField\">\r\n                      <label className=\"FormField__Label\" htmlFor=\"authenticationCode\">Authentication Code</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        id=\"authenticationCode\"\r\n                        className=\"FormField__Input\"\r\n                        placeholder=\"Enter Authentication Code\"\r\n                        name=\"authenticationCode\"\r\n                        required=\"required\"\r\n                        value={this.state.code}\r\n                        onChange={this.updateCode.bind(this)}/>\r\n                    </div>\r\n                    \r\n\r\n                    <div className=\"FormField\">\r\n                      <button className=\"FormField__Button mr-20\"> Confirm Signup</button>\r\n                      <Link to=\"/sign-in\" className=\"FormField__Link\">I'm already a member</Link>\r\n                    </div>\r\n                  </form>\r\n                  )\r\n                }\r\n          </div>\r\n        );\r\n    };\r\n}\r\n\r\nexport default SignUpForm;","import React, { Component } from \"react\";\r\nimport { Auth } from \"aws-amplify\";\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass SignInForm extends Component{\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            email:'',\r\n            password:'',\r\n            jwt: ''\r\n        };\r\n\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n    }\r\n\r\n\r\n    handleChange(event){\r\n        let target = event.target; //select target element\r\n        let value = target.type === 'checkbox' ? target.checked : target.value;//value of the input eg. \"pj@gmail.com\"\r\n        let name = target.name; //name attribute of the inputs eg. \"email\"\r\n\r\n        this.setState({\r\n            [name]: value //eg. \"email\": \"pj@gmail.com\"\r\n        });\r\n    }\r\n\r\n \r\n\r\n    async handleSubmit(event){\r\n        event.preventDefault();\r\n\r\n        // @TODO EXPECTED:\r\n        //     if (user is authenticated and session has not expired)\r\n        //         directToMainPage();\r\n        //     else if(user is not authenticated or session has expired)\r\n        //         Auth.signIn(email,password); //sign in to cognito\r\n        //     else\r\n        //         //user is not registered\r\n        //         //prompt user to register\r\n\r\n        try {\r\n            const user = await Auth.signIn(this.state.email, this.state.password);\r\n            console.log(\"Auth\");\r\n            \r\n            const auth = await Auth.currentSession();\r\n            // const auth = await Auth.currentAuthenticatedUser();\r\n            console.log(auth.idToken.jwtToken);\r\n            console.log(this.state.email);\r\n            localStorage.setItem(\"token\", auth.idToken.jwtToken);\r\n            localStorage.setItem(\"email\", this.state.email);\r\n\r\n            window.location.href=\"/\";\r\n        } catch(error) {\r\n            console.log(error);\r\n            // TODO: prompt user to try again\r\n        }\r\n    }\r\n\r\n        \r\n    render() {\r\n        return (\r\n            <div className=\"FormCenter\">\r\n                <form className=\"FormFields\" onSubmit={this.handleSubmit}>\r\n                    \r\n                <div className=\"FormField\">\r\n                    <label className=\"FormField__Label\" htmlFor=\"email\">Email Address</label>\r\n                    <input \r\n                        type=\"email\"\r\n                        id=\"email\"\r\n                        className=\"FormField__Input\"\r\n                        placeholder=\"Enter your Email Address\"\r\n                        name=\"email\"\r\n                        required=\"required\"\r\n                        value={this.state.email}\r\n                        onChange={this.handleChange}/>\r\n                    </div>\r\n\r\n                    <div className=\"FormField\">\r\n                    <label className=\"FormField__Label\" htmlFor=\"password\">Password</label>\r\n                    <input\r\n                        type=\"password\"\r\n                        id=\"password\"\r\n                        className=\"FormField__Input\"\r\n                        placeholder=\"Enter your password\"\r\n                        name=\"password\"\r\n                        required=\"required\"\r\n                        value={this.state.password}\r\n                        onChange={this.handleChange}/>\r\n                    </div>\r\n\r\n                    <div className=\"FormField\">\r\n                        <button className=\"FormField__Button mr-20\"> Sign In </button>\r\n                        <Link to=\"/\"className=\"FormField__Link\">Create an account</Link>\r\n                    </div>\r\n                </form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default SignInForm;","import React, { Component } from 'react';\r\nimport { BrowserRouter as Router, Route, NavLink } from 'react-router-dom';\r\nimport SignUpForm from \"./SignUpForm\";\r\nimport SignInForm from \"./SignInForm\";\r\nimport './App.css';\r\n\r\nclass Login extends Component {\r\n  render() {\r\n   return (\r\n        <Router>\r\n          <div className=\"Appp\">\r\n            <div className=\"App__Aside\">\r\n            </div>\r\n            <div className=\"App__Form\">\r\n              <div className=\"PageSwitcher\">\r\n                <NavLink to=\"/sign-in\"\r\n                  className=\"PageSwitcher__Item\"\r\n                  activeClassName=\"PageSwitcher__Item PageSwitcher__Item--Active\">Sign In</NavLink>\r\n                <NavLink exact to=\"/\"\r\n                  className=\"PageSwitcher__Item\"\r\n                  activeClassName=\"PageSwitcher__Item PageSwitcher__Item--Active\">Sign Up</NavLink>\r\n              </div>\r\n\r\n              <div className=\"FormTitle\">\r\n                <NavLink to=\"/sign-in\"\r\n                  activeClassName=\"FormTitle__Link FormTitle__Link--Active\"\r\n                  className=\"FormTitle__Link\">Sign In</NavLink>\r\n                  or \r\n                <NavLink exact to=\"/\"\r\n                  activeClassName=\"FormTitle__Link FormTitle__Link--Active\"\r\n                  className=\"FormTitle__Link\">Sign Up</NavLink>\r\n              </div>\r\n\r\n              <Route exact path=\"/\" component={SignUpForm}/>\r\n              <Route path=\"/sign-in\" component={SignInForm}/>\r\n            </div>\r\n          </div>\r\n        </Router>\r\n      );\r\n  }\r\n}\r\n\r\nexport default Login;\r\n","import React, { Component } from \"react\";\r\n\r\nclass SideBar extends Component {\r\n  logOut() {\r\n    localStorage.removeItem(\"token\");\r\n    localStorage.removeItem(\"email\");\r\n    window.location.reload();\r\n  }\r\n\r\n\r\n  render() {\r\n    const { user, userListings } = this.props;\r\n    return (\r\n      <div\r\n        id=\"sidebar\"\r\n        className=\"sidebar collapse\"\r\n        style={{\r\n          width: \"230px\",\r\n          marginTop: \"1vh\",\r\n          backgroundColor: \"#393D3F\",\r\n          height: \"95vh\",\r\n          position: \"fixed\",\r\n          right: \"0px\",\r\n        }}\r\n      >\r\n        <div\r\n          id=\"sidebar-header\"\r\n          className=\"py-3\"\r\n          style={{ color: \"white\", height: \"130px\", backgroundColor: \"#282A2C\" }}\r\n        >\r\n          <div id=\"user_info\" className=\"row ml-0 mr-0\">\r\n            <img\r\n              src=\"imgs/profile_default.jpg\"\r\n              className=\"rounded-circle ml-2 my-1 column\"\r\n              style={{ height: \"40px\" }}\r\n              alt=\"profile\"\r\n            />\r\n            <div className=\"column\" id=\"\" style={{ fontSize: \"16px\" }}>\r\n              <div id=\"username\" className=\"row ml-3 mr-0\">\r\n                {user.displayname}\r\n              </div>\r\n              <div id=\"location\" className=\"row ml-3 mr-0\" style={{ fontSize: \"14px\" }}>\r\n                <i className=\"fas fa-map-marker-alt\"></i>\r\n                <div className=\"ml-2\">{user.city}</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <hr className=\"mt-3 mb-0\" style={{ backgroundColor: \"#D8D8D8\", opacity: \"15%\" }} />\r\n          <div id=\"tabs\" className=\"row mx-0\" style={{ marginTop: \"auto\", height: \"51%\" }}>\r\n            <div className=\"column px-3 mr-1 border-right pt-2\">\r\n              <i className=\"fas fa-sign-out-alt mt-2 mx-2\"></i>\r\n            </div>\r\n            <div className=\"column pl-2 mr-1 pr-3 pt-2 border-right\" style={{ fontSize: \"12px\" }}>\r\n              <div>Followers</div>\r\n              <div>210</div>\r\n            </div>\r\n            <div className=\"column pl-2 pt-2\" style={{ fontSize: \"12px\" }}>\r\n              <div>Following</div>\r\n              <div>200</div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div id=\"sidebar-list\" className=\"container px-0 listings\" style={{ color: \"white\" }}>\r\n          <div className=\"text-center font-weight-bold mt-2 py-1\">My Listings</div>\r\n\r\n          <hr className=\"mt-2 mb-0\" style={{ backgroundColor: \"#D8D8D8\", opacity: \"15%\" }} />\r\n\r\n          <div className=\"pl-3 pt-1 ml-2\">Pending</div>\r\n          {userListings.pending.length ? (\r\n            <div className=\"row mx-0\">\r\n              <div className=\"column ml-3\">\r\n                <img\r\n                  src={userListings.pending[0].mealImagePath}\r\n                  style={{ width: \"115px\", height: \"115px\" }}\r\n                  alt=\"pending listing\"\r\n                />\r\n              </div>\r\n              <div className=\"column pl-2\">\r\n                <div>{userListings.pending[0].mealName}</div>\r\n                <div className=\"font-weight-bold\">${userListings.pending[0].mealPrice}</div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n\r\n          <hr className=\"mt-3 mb-0\" style={{ backgroundColor: \"#D8D8D8\", opacity: \"15%\" }} />\r\n          <div className=\"pl-3 pt-1 ml-2\">Current Listings</div>\r\n          {userListings.active.length ? (\r\n            <div className=\"row mx-0\">\r\n              <div className=\"column ml-3\">\r\n                <img\r\n                  src={userListings.active[0].mealImagePath}\r\n                  style={{ width: \"115px\", height: \"115px\" }}\r\n                  alt=\"active listing\"\r\n                />\r\n              </div>\r\n              <div className=\"column pl-2\">\r\n                <div>{userListings.active[0].mealName}</div>\r\n                <div className=\"font-weight-bold\">${userListings.active[0].mealPrice}</div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n\r\n          <hr className=\"mt-3 mb-0\" style={{ backgroundColor: \"#D8D8D8\", opacity: \"15%\" }} />\r\n          <div className=\"pl-3 pt-1 ml-2\">History</div>\r\n          {userListings.sold.length ? (\r\n            <div className=\"row mx-0\">\r\n              <div className=\"column ml-3\">\r\n                <img\r\n                  src={userListings.sold[0].mealImagePath}\r\n                  style={{ width: \"115px\", height: \"115px\" }}\r\n                  alt=\"sold listing\"\r\n                />\r\n              </div>\r\n              <div className=\"column pl-2\">\r\n                <div>{userListings.sold[0].mealName}</div>\r\n                <div className=\"font-weight-bold\">${userListings.sold[0].mealPrice}</div>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            \"\"\r\n          )}\r\n\r\n          <div\r\n            id=\"sidebar-buttons\"\r\n            className=\"row mx-0 border-top\"\r\n            style={{ fontSize: \"28px\", position: \"absolute\", bottom: 0 }}\r\n          >\r\n            <div onClick={() => this.logOut()} className=\"column px-4 py-2 border-right\">\r\n              <i className=\"fa fa-sign-out\"></i>\r\n            </div>\r\n            <div className=\"column px-4 py-2 border-right\">\r\n              <i className=\"fas fa-plus\"></i>\r\n            </div>\r\n            <div className=\"column px-4 py-2\">\r\n              <i className=\"fas fa-cog\"></i>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SideBar;\r\n","import React, { Component } from \"react\";\r\nimport { FaStar } from \"react-icons/fa\";\r\n\r\nclass StarRating extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      rating: null,\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { onSelect } = this.props;\r\n    return (\r\n      <div>\r\n        {[...Array(5)].map((star, i) => {\r\n          const ratingValue = i + 1;\r\n          return (\r\n            <label>\r\n              <input\r\n                type=\"radio\"\r\n                name=\"rating\"\r\n                value={ratingValue}\r\n                onClick={() =>\r\n                  this.setState({ rating: ratingValue }, () => {\r\n                    onSelect(this.state.rating);\r\n                  })\r\n                }\r\n              />\r\n              <FaStar className=\"star\" color={ratingValue <= this.state.rating ? \"#ffc107\" : \"#e4e5e9\"} size={40} />\r\n            </label>\r\n          );\r\n        })}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default StarRating;","import React, { Component } from \"react\";\r\nimport { Form, Button, DropdownButton, Dropdown, Col, Row } from \"react-bootstrap\";\r\nimport StarRating from \"./StarRating\";\r\nimport CurrencyInput from \"react-currency-input\";\r\nimport MealTags from \"./MealTags\";\r\n\r\nclass SearchForm extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.mealNameInput = React.createRef();\r\n\r\n    this.state = {\r\n      minPrice: 0,\r\n      maxPrice: 0,\r\n    };\r\n  }\r\n\r\n  clearInputs = () => {\r\n    this.mealNameInput.current.value = \"\";\r\n    this.setState({ minPrice: 0 });\r\n    this.setState({ maxPrice: 99 });\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      cities,\r\n      selectedCity,\r\n      updateSelectedCity,\r\n      sortOptions,\r\n      selectedSortOption,\r\n      updateSortOption,\r\n      getMeals,\r\n      updateRequestedMeal,\r\n      updatePriceRange,\r\n      updateMealTags,\r\n      updateRequestedRating,\r\n    } = this.props;\r\n    return (\r\n      <div\r\n        id=\"searchbar\"\r\n        className=\"mx-auto p-3 border border-secondary rounded collapse\"\r\n        // <div id=\"searchbar\" className=\"mx-auto p-3 border border-secondary rounded\"\r\n        style={{\r\n          zIndex: 10333,\r\n          position: \"absolute\",\r\n          left: \"33%\",\r\n          backgroundColor: \"white\",\r\n        }}\r\n      >\r\n        <Form>\r\n          <Form.Group>\r\n            <Form.Control placeholder=\"Meal Name\" ref={this.mealNameInput} />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <Row>\r\n              <Col>\r\n                <CurrencyInput\r\n                  value={this.state.minPrice}\r\n                  onChangeEvent={(event, maskedvalue, floatvalue) => {\r\n                    this.setState({ minPrice: maskedvalue });\r\n                  }}\r\n                />\r\n              </Col>\r\n              <Col>\r\n                <CurrencyInput\r\n                  value={this.state.maxPrice}\r\n                  onChangeEvent={(event, maskedvalue, floatvalue) => {\r\n                    this.setState({ maxPrice: maskedvalue });\r\n                  }}\r\n                />\r\n              </Col>\r\n            </Row>\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <StarRating onSelect={updateRequestedRating} />\r\n          </Form.Group>\r\n          <Form.Group>\r\n            <MealTags updateMealTags={updateMealTags} />\r\n          </Form.Group>\r\n        </Form>\r\n        <Row className=\"px-3\">\r\n          <DropdownButton\r\n            id=\"dropdown-basic-button\"\r\n            className=\"mx-3\"\r\n            title={selectedCity}\r\n            onSelect={(event) => updateSelectedCity(event)}\r\n          >\r\n            {cities.map((city) => (\r\n              <Dropdown.Item eventKey={city}>{city}</Dropdown.Item>\r\n            ))}\r\n          </DropdownButton>\r\n          <DropdownButton\r\n            id=\"dropdown-basic-button\"\r\n            className=\"mx-3\"\r\n            title={selectedSortOption}\r\n            onSelect={(event) => updateSortOption(event)}\r\n          >\r\n            {sortOptions.map((sortOption) => (\r\n              <Dropdown.Item eventKey={sortOption}>{sortOption}</Dropdown.Item>\r\n            ))}\r\n          </DropdownButton>\r\n          <Button className=\"mx-3\" variant=\"primary\" type=\"button\" onClick={() => this.clearInputs()}>\r\n            Clear\r\n          </Button>\r\n          <Button\r\n            className=\"mx-3\"\r\n            variant=\"primary\"\r\n            type=\"button\"\r\n            onClick={() => {\r\n              updateRequestedMeal(this.mealNameInput.current.value);\r\n              updatePriceRange(this.state.minPrice, this.state.maxPrice);\r\n              getMeals();\r\n            }}\r\n            data-toggle=\"collapse\"\r\n            data-target=\"#searchbar\"\r\n          >\r\n            Search\r\n          </Button>\r\n        </Row>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SearchForm;\r\n","let sortMealByName = (foodItems) => {\r\n  return foodItems.sort((meal, otherMeal) =>\r\n    meal.mealName.toLowerCase() > otherMeal.mealName.toLowerCase() ? 1 : -1\r\n  );\r\n};\r\n\r\nlet sortMealByPrice = (foodItems) => {\r\n  return foodItems.sort((meal, otherMeal) =>\r\n    parseInt(meal.mealPrice) > parseInt(otherMeal.mealPrice) ? 1 : -1\r\n  );\r\n};\r\n\r\nlet sortMealByDate = (foodItems) => {\r\n  return foodItems.sort(\r\n    (meal, otherMeal) =>\r\n      new Date(meal[\"listingTimestamp\"]) -\r\n      new Date(otherMeal[\"listingTimestamp\"])\r\n  );\r\n};\r\n\r\nlet sortMeals = (sortOption, foodItems) => {\r\n  if (sortOption === \"Name\") return sortMealByName(foodItems);\r\n  else if (sortOption === \"Date Posted\") return sortMealByDate(foodItems);\r\n  else return sortMealByPrice(foodItems);\r\n};\r\n\r\nexport default sortMeals;\r\n","// Original commit by PJ\r\n\r\nimport React, { Component } from \"react\";\r\nimport NotificationItem from './NotificationItem';\r\nimport firebase from \"firebase\";\r\nimport './Notification.css';\r\nimport BellIcon from \"react-bell-icon\";\r\n\r\nclass NotificationPage extends Component {\r\n    constructor(props){\r\n        super(props);\r\n\r\n\r\n        //this array will contain notification payloads from firebase\r\n        this.state={\r\n            notifications: [],\r\n            purchase_requests: [],\r\n            show: false,\r\n            added: false,\r\n            hasNewNotifications: false,\r\n            bellColor: \"#000000\",\r\n            email: this.props.user.email.replace(\".\", \"_DOT_\") \r\n        }\r\n\r\n        this.Read_Notifications = this.Read_Notifications.bind(this);\r\n        this.Load_Notifications_From_Firebase = this.Load_Notifications_From_Firebase.bind(this);\r\n        this.Load_Request_From_Firebase = this.Load_Request_From_Firebase.bind(this);\r\n        this.promise_setState = this.promise_setState.bind(this);\r\n    }\r\n\r\n\r\n\r\n    /*CASE 1: user clicks on notification bell and sees stored notifications from firebase */\r\n\r\n    promise_setState = async(newState) =>{\r\n        new Promise((resolve) => {\r\n            this.setState(newState, resolve)\r\n        });\r\n    }\r\n\r\n    Read_Notifications = async(event) =>{\r\n        event.preventDefault();\r\n\r\n        //console.log(\"Before the if() show: \" + this.state.show + \" added: \" + this.state.added);\r\n        if(this.state.show === false) //is false then proceed to load data\r\n        { \r\n            await this.promise_setState({ show: true});\r\n\r\n            await this.Load_Notifications_From_Firebase(this.state.email);\r\n            // await this.Load_Notifications_From_Firebase(id);\r\n            this.Relax_Notification_Bell();\r\n            //console.log(\"After first statement show: \" + this.state.show + \" added: \" + this.state.added);\r\n        }\r\n        else //if state is true then reset\r\n        {\r\n            await this.promise_setState({\r\n                notifications: [],\r\n                show:false\r\n            });\r\n            this.Relax_Notification_Bell();\r\n            //console.log(\"After second statement show: \" + this.state.show + \" added: \" + this.state.added);\r\n        }\r\n    }\r\n\r\n    Load_Request_From_Firebase = async(key) =>{\r\n        var that = this;\r\n        firebase.database().ref(\"requests\").child(key)\r\n        .once(\"value\", function(snapshot){\r\n            var newObject = snapshot.val();\r\n            var object_array = that.state.notifications.concat(newObject);\r\n\r\n            that.promise_setState({notifications: object_array})\r\n            .then(value=>{\r\n                //console.log(newObject.meal_name + \" was added into notification array\");\r\n            });            \r\n        })      \r\n    }\r\n\r\n\r\n\r\n    Load_Notifications_From_Firebase = async(email) =>{\r\n        var that = this;\r\n\r\n        firebase.database().ref(\"users/\" + email).child(\"purchase_requests\")\r\n        .on(\"child_added\", function(snapshot){\r\n\r\n            if(that.state.show === true){ \r\n                var newKey = snapshot.key;\r\n                //fill notification array\r\n                that.Load_Request_From_Firebase(newKey); \r\n            }\r\n            else if(that.state.show === false)\r\n            {\r\n                that.Update_Notification_Bell();\r\n            }\r\n        })\r\n    }\r\n\r\n/*EOF Case 1*/\r\n\r\n/*BOF NOTIFICATION BELL*/\r\n\r\n    Update_Notification_Bell(){\r\n        this.setState({\r\n            hasNewNotifications: true,\r\n            bellColor: \"#ff2121\" \r\n        })\r\n    }\r\n\r\n    Relax_Notification_Bell(){\r\n        this.setState({\r\n            hasNewNotifications: false,\r\n            bellColor: \"#000000\" \r\n        })\r\n    }\r\n\r\n/*EOF NOTIFICATION BELL*/\r\n\r\n\r\n\r\n    componentDidMount(){\r\n        //testing purposes\r\n        //var myRef = firebase.database().ref('users');\r\n        // myRef.set({\r\n        //     'jerryzhu@gmail_DOT_com' : {\r\n        //         imgsrc: \"https://foodimagebucket.s3-us-west-2.amazonaws.com/Users/Eeyore.jpg\",\r\n        //         email: \"jerryzhu@gmail_DOT_com\",\r\n        //         displayname: \"jerryzhu34\"\r\n        //       },\r\n        //       'pj@gmail_DOT_com': {\r\n        //         imgsrc: \"https://foodimagebucket.s3-us-west-2.amazonaws.com/Users/Piglet.png\",\r\n        //         email: \"pj@gmail_DOT_com\",\r\n        //         displayname: \"PJ\",\r\n        //         // purchase_requests:{\r\n        //         //     // \"adsfdfdfaasdf\":true,\r\n        //         //     // \"dfasdfasdfas\": true\r\n        //         // }\r\n        //       },\r\n        //       'domluu@gmail_DOT_com' : {\r\n        //         imgsrc: \"https://foodimagebucket.s3-us-west-2.amazonaws.com/Users/Roo.jpg\",\r\n        //         email: \"domluu@gmail_DOT_com\",\r\n        //         displayname: \"dommy\"\r\n        //       },\r\n        //       'maxhenderson@gmail_DOT_com' : {\r\n        //         imgsrc: \"https://foodimagebucket.s3-us-west-2.amazonaws.com/Users/Winnie.jpg\",\r\n        //         email: \"maxhenderson@gmail_DOT_com\",\r\n        //         displayname: \"mad max\"\r\n        //       }\r\n        // });\r\n\r\n       // firebase.database().ref('users/pj@gmail_DOT_com').child(\"purchase_requests\").push().child(\"sdfasdfsf\").push().set(true);\r\n        // firebase.database().ref('users/pj@gmail_DOT_com').child(\"purchase_requests\").child(\"1234\").set(true);\r\n        // firebase.database().ref('users/pj@gmail_DOT_com').child(\"purchase_requests\").child(\"1223345\").set(true);\r\n\r\n        //add to purchase request component\r\n        //push purchase request payload to db and update user purchase request list\r\n        // var myRef = firebase.database().ref('requests');\r\n        // var key = myRef.push().getKey();\r\n        // console.log(\"Key: \" + key);\r\n        // myRef.child(key).set({\r\n        //     meal_id: key,\r\n        //     meal_imgsrc: \"https://target.scene7.com/is/image/Target/GUEST_5c921084-dcbe-4785-b426-5fc5a4e3f607?wid=488&hei=488&fmt=pjpeg\",\r\n        //     meal_name: \"jalapeno chips\",\r\n        //     meal_price: \"4.99\",\r\n        //     response: \"pending\",\r\n        //     seller_displayname: \"jerryzhu34\",\r\n        //     seller_email: \"jerryzhu@gmail_DOT_com\",\r\n        //     buyer_displayname: \"PJ\",\r\n        //     buyer_email: \"pj@gmail_DOT_com\",\r\n        // }).then((snap)=>{\r\n        //     console.log(\"What is the value of the key?: \" + key);\r\n        //     firebase.database().ref('users/pj@gmail_DOT_com').child(\"purchase_requests\").child(key).set(true);\r\n        //     firebase.database().ref('users/jerryzhu@gmail_DOT_com').child(\"purchase_requests\").child(key).set(true);\r\n        // });\r\n\r\n    }\r\n\r\n\r\n\r\n    render(){\r\n        //Notifications are displayed by clicking on the notification bell icon\r\n        //@TODO-LATER: make notification bell component that can render the number of unseen notifications in the corner\r\n        return(\r\n            <div className=\"not-container\">\r\n                <form onSubmit={this.Read_Notifications}> \r\n                    <button type=\"submit\">view requests\r\n                        <BellIcon width='40' active={this.state.hasNewNotifications} animate={this.state.hasNewNotifications} color={this.state.bellColor}/>\r\n                    </button>\r\n                </form>\r\n                <NotificationItem notifications={this.state.notifications} myEmail={this.state.email}/>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default NotificationPage;","import ListingModal from \"./ListingModal.js\";\r\nimport CardList from \"../CardList.js\";\r\nimport NavBar from \"./NavBar.js\";\r\nimport SideBar from \"./SideBar.js\";\r\nimport SearchForm from \"../components/search-form.jsx\";\r\nimport ListingPage from \"../components/ViewListingPage.js\";\r\nimport NewItemPage from \"./NewItemPage.js\";\r\nimport UpdateItemPage from \"./UpdateItemPage\";\r\nimport sortMeals from \"./SortMeals.js\";\r\nimport NotificationPage from \"../components/Notification/NotificationPage.js\";\r\n\r\nimport React, { Component } from \"react\";\r\nimport $ from \"jquery\";\r\nimport { BrowserRouter as Router, Switch, Route, NavLink } from \"react-router-dom\";\r\n\r\nclass MainPage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.cities = [\"All\", \"Bellevue\", \"Renton\", \"Issaquah\", \"Redmond\"];\r\n\r\n    this.sortOptions = [\"Price\", \"Name\", \"Date Posted\"];\r\n\r\n    this.state = {\r\n      user: {},\r\n      userListings: {\r\n        active: [],\r\n        pending: [],\r\n        sold: [],\r\n      },\r\n      selectedSortOption: this.sortOptions ? this.sortOptions[0] : \"Price\",\r\n      selectedCity: this.cities ? this.cities[0] : \"All\",\r\n      requestedMeal: \"\",\r\n      minPrice: 0,\r\n      maxPrice: 999,\r\n      mealTags: [],\r\n      minRating: 0,\r\n      foodItems: [],\r\n      mealIDs: [],\r\n      currMeal: {\r\n        mealId: 0,\r\n        mealName: \"apple\",\r\n        mealPrice: \"\",\r\n        mealDescription: \"\",\r\n        mealImagePath: \"\",\r\n        imgAlt: \"\",\r\n      },\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getUserInfo();\r\n    this.getMeals();\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.renderMain();\r\n  }\r\n\r\n  updateSelectedCity = (city) => {\r\n    this.setState({ selectedCity: city });\r\n  };\r\n\r\n  updateSortOption = (sortOption) => {\r\n    this.setState({ selectedSortOption: sortOption });\r\n  };\r\n\r\n  updateRequestedRating = (rating) => {\r\n    this.setState({ minRating: rating });\r\n  };\r\n\r\n  updateRequestedMeal = (mealName) => {\r\n    this.setState({ requestedMeal: mealName });\r\n  };\r\n\r\n  updatePriceRange = (minPrice, maxPrice) => {\r\n    this.setState({ minPrice: minPrice });\r\n    this.setState({ maxPrice: maxPrice });\r\n  };\r\n\r\n  updateMealTags = (tags) => {\r\n    this.setState({ mealTags: tags.map((tag) => tag.toLowerCase()) });\r\n  };\r\n\r\n  getUserMeals = async () => {\r\n    const Url = \"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/getMeals\";\r\n    const Http = new XMLHttpRequest();\r\n    Http.open(\"GET\", Url);\r\n    Http.onreadystatechange = (e) => {\r\n      console.log(Http.responseText);\r\n    };\r\n    return $.ajax({\r\n      url: Url,\r\n      type: \"POST\",\r\n      dataType: \"json\",\r\n      data: JSON.stringify(this.state.user.mealIDs),\r\n      success: function (result) {\r\n        // console.log(result);\r\n      },\r\n      error: function (error) {\r\n        console.log(`Error ${error}`);\r\n      },\r\n    }).promise();\r\n  };\r\n\r\n  /* Sets filtered meal objects to foodItems */\r\n  getMeals = async () => {\r\n    this.getMealIDs()\r\n      .then((mealIDs) => this.filterMeals(mealIDs))\r\n      .then((meals) => this.setState({ foodItems: meals }))\r\n      .then(() =>\r\n        this.setState({\r\n          foodItems: sortMeals(this.state.selectedSortOption, this.state.foodItems),\r\n        })\r\n      );\r\n  };\r\n\r\n  /* Returns a promise of mealIDs that are in a specified city */\r\n  getMealIDs = async () => {\r\n    /* Construct query string */\r\n    const QueryString = \"?city=\" + this.state.selectedCity + \"&minRating=\" + this.state.minRating;\r\n\r\n    const Url = \"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/users/\" + QueryString;\r\n    const Http = new XMLHttpRequest();\r\n    Http.open(\"GET\", Url);\r\n    Http.onreadystatechange = (e) => {\r\n      console.log(Http.responseText);\r\n    };\r\n\r\n    /* Return promise of meal IDs */\r\n    return $.ajax({\r\n      url: Url,\r\n      type: \"GET\",\r\n      success: function (result) {\r\n        // console.log(result);\r\n      },\r\n      error: function (error) {\r\n        console.log(`Error ${error}`);\r\n      },\r\n    })\r\n      .then((result) => {\r\n        /* Flattens array of arrays to an array of mealIDs */\r\n        var mealIDs = [].concat.apply(\r\n          [],\r\n          result.map((user) => user.mealIDs)\r\n        );\r\n        return mealIDs;\r\n      })\r\n      .promise();\r\n  };\r\n\r\n  /* Returns a promise of array of meal objects that meet certain criteria */\r\n  filterMeals = async (mealIDs) => {\r\n    /* Construct query string */\r\n    let QueryString =\r\n      \"?mealName=\" + this.state.requestedMeal + \"&minPrice=\" + this.state.minPrice + \"&maxPrice=\" + this.state.maxPrice;\r\n\r\n    if (this.state.mealTags !== undefined && this.state.mealTags.length != 0) {\r\n      QueryString += \"&mealTags=\" + JSON.stringify(this.state.mealTags);\r\n    }\r\n\r\n    /* Using filterMeals Lambda function */\r\n    const Url = \"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/filterMeals\" + QueryString;\r\n    const Http = new XMLHttpRequest();\r\n    Http.open(\"GET\", Url);\r\n    Http.onreadystatechange = (e) => {\r\n      console.log(Http.responseText);\r\n    };\r\n\r\n    return $.ajax({\r\n      url: Url,\r\n      type: \"GET\",\r\n      success: function (result) {\r\n        // console.log(result);\r\n      },\r\n      error: function (error) {\r\n        console.log(`Error ${error}`);\r\n      },\r\n    })\r\n      .then((meals) => {\r\n        return meals.filter((meal) => {\r\n          return mealIDs.includes(meal.mealID);\r\n        });\r\n      })\r\n      .promise();\r\n  };\r\n\r\n  getUserInfo = async () => {\r\n    const email = localStorage.getItem(\"email\");\r\n    this.loadUserInfo(email)\r\n      .then((result) => {\r\n        this.setState({ user: result.Item });\r\n      })\r\n      .then(() =>\r\n        this.getUserMeals().then((meals) => {\r\n          let activeListings = meals.filter((meal) => {\r\n            return meal.listingStatus == \"active\";\r\n          });\r\n          let pendingListings = meals.filter((meal) => {\r\n            return meal.listingStatus == \"pending\";\r\n          });\r\n          let soldListings = meals.filter((meal) => {\r\n            return meal.listingStatus == \"sold\";\r\n          });\r\n          this.setState({ userListings: { active: activeListings, pending: pendingListings, sold: soldListings } });\r\n        })\r\n      );\r\n  };\r\n\r\n  loadUserInfo(email) {\r\n    var queryString = \"/user/\" + email;\r\n    var Url = \"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/pj_stage_01\";\r\n    Url = Url.concat(queryString);\r\n\r\n    return $.ajax({\r\n      url: Url,\r\n      type: \"GET\",\r\n      crossDomain: true,\r\n      contentType: \"application/json\",\r\n      success: function (data) {\r\n        console.log(data);\r\n      },\r\n      error: function (error) {\r\n        console.log(error);\r\n      },\r\n    });\r\n  }\r\n\r\n  setCurrentMeal(id) {\r\n    let foodArr = this.state.foodItems;\r\n    let meal = foodArr.find((item) => {\r\n      return item.mealID === id;\r\n    });\r\n    this.setState({ currMeal: meal });\r\n  }\r\n\r\n\r\n\r\n  renderMain = () => {\r\n    return (\r\n      <React.Fragment>\r\n        <SearchForm\r\n          cities={this.cities}\r\n          selectedCity={this.state.selectedCity}\r\n          updateSelectedCity={this.updateSelectedCity}\r\n          sortOptions={this.sortOptions}\r\n          selectedSortOption={this.state.selectedSortOption}\r\n          updateSortOption={this.updateSortOption}\r\n          getMeals={this.getMeals}\r\n          updateRequestedMeal={this.updateRequestedMeal}\r\n          updatePriceRange={this.updatePriceRange}\r\n          updateMealTags={this.updateMealTags}\r\n          updateRequestedRating={this.updateRequestedRating}\r\n        />\r\n        <NavBar />\r\n        <SideBar user={this.state.user} userListings={this.state.userListings} />\r\n        <CardList foodItems={this.state.foodItems} getMealById={(id) => this.setCurrentMeal(id)} />\r\n        <ListingModal meal={this.state.currMeal} />\r\n      </React.Fragment>\r\n    );\r\n  };\r\n\r\n  render() {\r\n    let renderListing = () => {\r\n      return <ListingPage meal={this.state.currMeal} user={this.state.user} />;\r\n    };\r\n\r\n    let renderNotifications = () => {\r\n      return <NotificationPage user={this.state.user}/>\r\n    }\r\n\r\n    return (\r\n      <Router>\r\n        <Route exact path=\"/\" render={this.renderMain} />\r\n        <Route path=\"/listing\" component={renderListing} />\r\n        <Route path=\"/newItem\" component={NewItemPage} />\r\n        <Route path=\"/notifications\" render={renderNotifications}/>\r\n        <Route path=\"/updateItem\" component={UpdateItemPage} />\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n\r\nexport default MainPage;\r\n","import React, { Component } from \"react\";\r\nimport './Profile.css';\r\n\r\nclass ProfileCard extends Component{\r\n\r\n    render(){\r\n        var userObj = this.props.userObj;\r\n        return(\r\n            <div className=\"card-container-no-shadow\">\r\n                <img className=\"avatar-img\" src={userObj.imgsrc} alt=\"Avatar\"/>\r\n                <div className=\"container\">\r\n                    <h4><b>{userObj.firstname} {userObj.lastname}</b></h4>\r\n                    <h5><b>{userObj.displayname}</b></h5>\r\n                    <p>{userObj.city}</p>\r\n                    <p>{userObj.rating}</p>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default ProfileCard;","import React, { Component } from \"react\";\r\nimport { NavLink } from 'react-router-dom';\r\nimport $ from \"jquery\";\r\nimport './Profile.css';\r\nimport UpdateItemPage from \"../UpdateItemPage\";\r\n\r\nclass Posts extends Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state={\r\n            index:''\r\n        }\r\n        this.createPost = this.createPost.bind(this);\r\n        this.deletePost = this.deletePost.bind(this);\r\n    }\r\n\r\n    Delete_Meal_From_Meals_Table = async(mealID) =>{\r\n        var pathParam = \"/listings/\" + mealID;\r\n        var Url=\"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/pj_stage_01\";\r\n        Url = Url.concat(pathParam);\r\n \r\n        return $.ajax({\r\n            url: Url,\r\n            type: 'DELETE',\r\n            crossDomain: true, \r\n            contentType: 'application/json',\r\n            dataType: 'json',\r\n           \r\n            success: function(data) {\r\n                console.log(\"Successfully delete from users table\");\r\n            },   \r\n            error:function(error) {\r\n                console.log(error); \r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    Delete_Meal_From_Users_Table = async(userID, mealID, index) =>{\r\n        var pathParam = \"/user/\" + userID + \"/\" + mealID + \"/\" + index;\r\n        var Url=\"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/pj_stage_01\";\r\n        Url = Url.concat(pathParam);\r\n \r\n        return $.ajax({\r\n            url: Url,\r\n            type: 'DELETE',\r\n            crossDomain: true, \r\n            contentType: 'application/json',\r\n            dataType: 'json',\r\n           \r\n            success: function(data) {\r\n                console.log(\"Successfully delete from users table\");\r\n            },   \r\n            error:function(error) {\r\n                console.log(error); \r\n            }\r\n        });\r\n    }\r\n\r\n    delete(key){\r\n        //test\r\n        console.log(\"Key is:\" + key);\r\n        this.props.delete(key);\r\n    }\r\n\r\n    deletePost = async(mealID)=>{\r\n        //grab key information\r\n        var userID = this.props.userObj.email;\r\n\r\n        //get index\r\n        var index = this.props.userPostings.map((userPostings) => userPostings.mealID).indexOf(mealID)\r\n        // var index = 0;\r\n        // console.log(\"DELETE MEAL ID: \"+ mealID)\r\n        // this.props.userPostings.forEach((item)=>{\r\n        //     console.log(item);\r\n        //     console.log(\"INNER LOOP MEAL ID: \"+item.mealID);\r\n        //     if(item.mealID !== mealID){\r\n        //         index++;\r\n        //     }\r\n        // })\r\n        console.log(\"Index: \" + index);\r\n\r\n        //pass userId, mealId, index and execute\r\n        await this.Delete_Meal_From_Users_Table(userID, mealID, index);\r\n        console.log(\"Deleted meal from users table\");\r\n        await this.Delete_Meal_From_Meals_Table(mealID);\r\n        console.log(\"Deleted meal from meals table\");\r\n\r\n        //update props state\r\n        this.props.deleteItem(mealID);\r\n    }\r\n\r\n    //Create PostCard\r\n    createPost(post){\r\n        return <li key={post.mealID}> \r\n                    <div className=\"card-container\">\r\n                        <img className=\"meal-img\" src={post.mealImagePath} alt=\"Meal-posting\"/>\r\n                        <div className=\"container\">\r\n                            <h4><b>{post.mealName}</b></h4>\r\n                            <p>{post.mealPrice}</p>\r\n                            <p>{post.mealDescription}</p>\r\n                            <p>{post.mealID}</p>\r\n                            <button type=\"button\" onClick={()=> {this.deletePost(post.mealID)}}>remove</button>\r\n                            {/* <button type=\"button\">edit</button> */}\r\n                            <NavLink to=\"/updateItem\">\r\n                                <div className=\"nav-link\" onClick={()=>localStorage.setItem(\"mealID\",post.mealID)}><div className=\"fas fa-plus\"></div></div>\r\n                            </NavLink>\r\n\r\n                        </div>\r\n                    </div>         \r\n                </li>\r\n    }\r\n\r\n    render(){\r\n        var posts = this.props.posts;\r\n        var list_of_posts = posts.map(this.createPost);\r\n        return (\r\n            <ul className=\"post-list\">\r\n                {list_of_posts}\r\n            </ul>\r\n        );\r\n    }\r\n\r\n}\r\nexport default Posts;","import React, { Component } from 'react';\r\nimport ProfileCard from './ProfileCard';\r\nimport Posts from './Post';\r\nimport NavBar from \"../NavBar\"\r\nimport $ from \"jquery\";\r\nimport './Profile.css';\r\n\r\nclass ProfilePage extends Component{\r\n\r\n    constructor(props){\r\n        super(props);\r\n\r\n        this.state = {\r\n            userPostings:[],\r\n            userActivePostings: [],\r\n            userPendingPostings:[],\r\n            userObj: {}\r\n        }\r\n\r\n        //list of functions\r\n        this.loadPostings = this.loadPostings.bind(this); //ajax call to db for get-user-postings\r\n        this.loadUserInfo = this.loadUserInfo.bind(this); //ajax call to db for get-user-object\r\n\r\n        this.getUserObject = this.getUserObject.bind(this); //promise function\r\n        this.getUserPostings = this.getUserPostings.bind(this); //promist function\r\n\r\n        this.sortActive = this.sortActive.bind(this); //sort userPostings[] for active postings\r\n        this.sortPending = this.sortPending.bind(this); //sort userPostings[] for pending postings\r\n\r\n        this.callLog = this.callLog.bind(this);\r\n        this.processArray = this.processArray.bind(this); \r\n        this.promise_async = this.promise_async.bind(this);\r\n        this.promise_setState = this.promise_setState.bind(this);\r\n \r\n        this.deleteItem = this.deleteItem.bind(this);\r\n    }\r\n\r\n    callLog = async(item) =>{\r\n        let result2 = await this.loadPostings(item);\r\n         if(result2 != null){\r\n            var newState = this.state.userPostings.concat(result2.Item);\r\n            await this.promise_setState({ userPostings: newState }, () => {\r\n                console.log(this.state.userPostings);\r\n            }) \r\n         }else{\r\n            console.log(\"Empty result2\")\r\n         }\r\n    }\r\n\r\n    processArray = async(array) => {\r\n        for(const item of array)\r\n          await this.callLog(item);\r\n    }\r\n\r\n\r\n     /*load user postings from database*/\r\n     loadPostings = mealID  => {\r\n        var mealId = String(mealID).trim();\r\n        var pathParam = \"/listings/\" + mealId;\r\n        var Url=\"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/pj_stage_01\";\r\n        Url = Url.concat(pathParam);\r\n \r\n        return $.ajax({\r\n            url: Url,\r\n            type: 'GET',\r\n            crossDomain: true, \r\n            contentType: 'application/json',\r\n            dataType: 'json',\r\n           \r\n            success: function(data) {\r\n                console.log(data);\r\n            },   \r\n            error:function(error) {\r\n                console.log(error); \r\n            }\r\n        });\r\n    }\r\n\r\n    /*get userObj from database*/\r\n    loadUserInfo(email){\r\n        var queryString = \"/user/\" + email;\r\n        var Url=\"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/pj_stage_01\";\r\n        Url = Url.concat(queryString);\r\n\r\n       return $.ajax({\r\n            url: Url,\r\n            type: 'GET',\r\n            crossDomain: true, \r\n            contentType: 'application/json',\r\n            success: function(data) {\r\n            }, \r\n            error:function(error) {\r\n                console.log(error); \r\n            }\r\n        });\r\n    }\r\n\r\n    promise_setState = async(newState) =>{\r\n        new Promise((resolve) => {\r\n            this.setState(newState, resolve)\r\n        });\r\n    }\r\n    \r\n\r\n    /*save user object to state*/\r\n    getUserObject = async() =>{ \r\n        let result = await this.loadUserInfo(localStorage.getItem(\"email\"));  \r\n        // let result = await this.loadUserInfo(this.props.match.params);  \r\n        if(result  != null){\r\n            await this.promise_setState({userObj:result.Item})\r\n        }else{\r\n            console.log(\"result is empty\"); \r\n        }\r\n    }\r\n\r\n    /*save user postings to state*/\r\n    getUserPostings = async() =>{\r\n        await this.processArray(this.state.userObj.mealIDs);   \r\n    }\r\n\r\n    promise_async = async() =>{\r\n        await this.getUserObject()\r\n        console.log(\"Complete!\")\r\n        await this.getUserPostings()\r\n        console.log(\"DONE!\")\r\n        await this.sortActive(this.state.userPostings)\r\n        console.log(\"Sort Active complete\")\r\n        await this.sortPending(this.state.userPostings)\r\n        console.log(\"Sort Pending complete\")\r\n    }\r\n  \r\n    /*sort userPostings[] for active postings*/\r\n    sortActive = async(array) =>{\r\n        array.forEach(async (element) => {\r\n            if (element){\r\n                if (element.listingStatus === \"active\"){\r\n                    var temp = this.state.userActivePostings.concat(element);\r\n                    await this.promise_setState({userActivePostings:temp}) \r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    /*sort userPostings[] for pending postings*/\r\n    sortPending = async(array) =>{\r\n        array.forEach(async (element) => {\r\n            if (element) {\r\n                if(element.listingStatus === \"pending\"){\r\n                    var temp = this.state.userPendingPostings.concat(element);\r\n                    await this.promise_setState({userPendingPostings:temp}) \r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    //key value comes from Posts\r\n    deleteItem = async(mealId) =>{\r\n        //update all of the state arrays :(\r\n        var filteredItems = this.state.userPostings.filter(function(posting){\r\n            return(posting.mealID !== mealId);\r\n        });\r\n        await this.promise_setState({ userPostings: filteredItems }) \r\n\r\n        filteredItems = this.state.userActivePostings.filter(function(posting){\r\n            return(posting.mealID !== mealId);\r\n        });\r\n        await this.promise_setState({ userActivePostings: filteredItems })\r\n\r\n        filteredItems = this.state.userPendingPostings.filter(function(posting){\r\n            return(posting.mealID !== mealId);\r\n        });\r\n        await this.promise_setState({ userPendingPostings: filteredItems }) \r\n        console.log(this.state.userPostings);\r\n\r\n        \r\n    }\r\n\r\n    componentDidMount(){\r\n        this.promise_async()\r\n    }\r\n\r\n    render(){\r\n        return(\r\n            <div className=\"profile-container\">\r\n                <NavBar></NavBar>\r\n                <div className=\"left-container\">\r\n                    <ProfileCard userObj={this.state.userObj}/>\r\n                </div>\r\n                <div className=\"right-container\">\r\n                    <div className=\"cred-container\">\r\n                        <h1>My Listings</h1>\r\n                    </div>\r\n                    <div className=\"post-container\">\r\n                        <h2>Active</h2>\r\n                        <Posts posts={this.state.userActivePostings} userObj={this.state.userObj} userPostings={this.state.userPostings}\r\n                            deleteItem={this.deleteItem}/>\r\n                        <h2>Pending</h2>\r\n                        <Posts posts={this.state.userPendingPostings} userObj={this.state.userObj} userPostings={this.state.userPostings}\r\n                            deleteItem={this.deleteItem}/>\r\n                    </div>     \r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\nexport default ProfilePage;","'use strict';\r\n\r\nimport React, { Component, useState } from \"react\";\r\nimport NewItemPage from \"./components/NewItemPage.js\";\r\nimport ListingPage from './components/ViewListingPage.js';\r\nimport ListingModal from './components/ListingModal.js';\r\nimport NavBar from \"./components/NavBar.js\";\r\nimport SideBar from \"./SideBar.js\";\r\nimport CardList from \"./CardList.js\";\r\nimport UpdateItemPage from \"./components/UpdateItemPage\";\r\nimport Login from \"./components/Login/Login.js\";\r\nimport MainPage from \"./components/MainPage.js\";\r\n\r\nimport $ from 'jquery';\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./styles/style.css\";\r\n\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport Amplify, { Auth } from 'aws-amplify';\r\nimport ProfilePage from \"./components/Profile/ProfilePage.js\";\r\n\r\n// Manual Amplify configuration\r\n// See https://aws-amplify.github.io/docs/js/authentication#amplify-project-setup\r\n// for other configuration options.\r\nAmplify.configure({\r\n  Auth: {\r\n      // REQUIRED only for Federated Authentication - Amazon Cognito Identity Pool ID\r\n      identityPoolId: 'us-west-2:4809a3a5-d7b3-436a-9030-4ec877205e7a',\r\n      \r\n      // REQUIRED - Amazon Cognito Region\r\n      region: 'us-west-2',\r\n\r\n    // OPTIONAL - Amazon Cognito User Pool ID\r\n    userPoolId: 'us-west-2_89J8r5C88',\r\n\r\n    // OPTIONAL - Amazon Cognito Web Client ID (26-char alphanumeric string)\r\n    userPoolWebClientId: '6a9fkc41bp4j2r5ihu3vibm5a2',\r\n  }\r\n});\r\n\r\n// You can get the current config object\r\n// const currentConfig = Auth.configure();\r\n// let auth = new AmazonCognitoIdentity(CognitoAuth(currentConfig))\r\n\r\nclass App extends Component {\r\n  render() {\r\n    let renderRoot = () => {\r\n      if (localStorage.getItem(\"token\")) {\r\n        return (\r\n          <MainPage />\r\n        );\r\n      } else {\r\n        return (\r\n          <Login auth={Auth} />\r\n        );\r\n      }\r\n    }\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <Router>\r\n          <Switch>\r\n            <Route exact path='/' component={renderRoot} />\r\n            <Route path='/newItem' component={NewItemPage} />\r\n            <Route path='/profile' component={ProfilePage} />\r\n            <Route path='/updateItem' component={UpdateItemPage} />\r\n          </Switch>\r\n        </Router>\r\n      </div>\r\n    );\r\n  }\r\n\r\n\r\n \r\n  handleAddMeal = async () => {\r\n    const Url = \"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/listings\";\r\n\r\n    const _data = {\r\n      mealID: 2800,\r\n      mealDescription: NewItemPage.state.foodDescription,\r\n      mealImagePath: \"google.com\",\r\n      mealName: NewItemPage.state.mealName,\r\n      mealPrice: NewItemPage.state.price\r\n    };\r\n\r\n    $.ajax({\r\n      url: Url,\r\n      type: 'POST',\r\n      dataType: 'jsonp',\r\n      headers: {\r\n        \"accept\": \"application/json\"\r\n      },\r\n      data: JSON.stringify(_data), \r\n      // dataType: \"json\",\r\n      contentType: 'application/json; charset=utf-8',\r\n      success: function (result) {\r\n        console.log(result);\r\n      },\r\n      error: function (xhr, status, error) {\r\n        console.log(JSON.stringify(xhr));\r\n      }\r\n    });\r\n    return false;\r\n  }\r\n\r\n \r\n\r\n  /* Fetches our route from the Express server */\r\n  callBackendAPI = async request => {\r\n    const response = await fetch(request);\r\n    const body = await response.json();\r\n\r\n    if (response.status !== 200) {\r\n      throw Error(body.message);\r\n    }\r\n    return body;\r\n  };\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nimport firebase from 'firebase';\r\n\r\nconst config = {\r\n    apiKey: \"AIzaSyBWI5fBwmwjXYLu1jBtpVa7Ru_1I3cNJBs\",\r\n    authDomain: \"food-network-chat.firebaseapp.com\",\r\n    databaseURL: \"https://food-network-chat.firebaseio.com\",\r\n    projectId: \"food-network-chat\",\r\n    storageBucket: \"food-network-chat.appspot.com\",\r\n    messagingSenderId: \"210291696500\",\r\n    appId: \"1:210291696500:web:ff7e159b3cf410a3b94221\",\r\n    measurementId: \"G-FN9DJ0GZBW\"\r\n};\r\n\r\nfirebase.initializeApp(config);\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}