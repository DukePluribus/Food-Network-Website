(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{132:function(e,t,a){},161:function(e,t){},168:function(e,t){},170:function(e,t,a){},184:function(e,t,a){},300:function(e,t,a){e.exports=a(838)},305:function(e,t,a){},745:function(e,t,a){},835:function(e,t,a){},838:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(61),i=a.n(s),l=(a(305),a(5)),o=a.n(l),c=a(10),m=a(11),u=a(12),p=a(14),d=a(13),f=a(28),g=a(8),h=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props,t=e.labelName,a=e.placeHolder,n=e.input,s=e.onChange;return r.a.createElement("div",null,r.a.createElement("label",null,t,":"),r.a.createElement("input",{type:"text",class:"form-control",placeholder:a,ref:n,onChange:s}))}}]),a}(n.Component),b=a(66),v=(a(95),a(132),a(62)),y=a(842),E=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).inputKeyDown=function(t){var a=t.target.value;if("Enter"===t.key&&a){if(e.state.tags.find((function(e){return e.toLowerCase()===a.toLowerCase()})))return;e.setState({tags:[].concat(Object(v.a)(e.state.tags),[a.toLowerCase()])},(function(){e.props.updateMealTags(e.state.tags)})),e.tagInput.value=null}else"Backspace"!==t.key||a||e.removeTag(e.state.tags.length-1)},e.removeTag=function(t){var a=Object(v.a)(e.state.tags);a.splice(t,1),e.setState({tags:a},(function(){e.props.updateMealTags(e.state.tags)}))},e.state={tags:[]},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"input-tag"},this.state.tags.map((function(t,a){return r.a.createElement(y.a,{variant:"primary",key:t},t,r.a.createElement("button",{type:"button",onClick:function(){e.removeTag(a)}},"x"))})),r.a.createElement("input",{type:"text",placeholder:"Meal Tag",onKeyDown:this.inputKeyDown,ref:function(t){e.tagInput=t}}))}}]),a}(n.Component),N=a(21),_=a(47),w=a.n(_),j=a(294),x=(a(184),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={notifications:[],items:{}},n.display_Notification=n.display_Notification.bind(Object(g.a)(n)),n.display_Correct_Notification_Body=n.display_Correct_Notification_Body.bind(Object(g.a)(n)),n.create_Buyer_Request_Notification=n.create_Buyer_Request_Notification.bind(Object(g.a)(n)),n.create_Seller_Request_Notification=n.create_Seller_Request_Notification.bind(Object(g.a)(n)),n.create_Buyer_Notification_Response=n.create_Buyer_Notification_Response.bind(Object(g.a)(n)),n.create_Seller_Notification_Response=n.create_Seller_Notification_Response.bind(Object(g.a)(n)),n.update_Request_Status=n.update_Request_Status.bind(Object(g.a)(n)),n}return Object(u.a)(a,[{key:"create_Buyer_Request_Notification",value:function(e,t,a){return"You have requested to purchase "+t+" from "+e+" for "+a}},{key:"create_Seller_Request_Notification",value:function(e,t,a){return e+" has requested to purchase "+t+" from you for "+a}},{key:"create_Buyer_Notification_Response",value:function(e,t,a){return e+" has "+a+" your request to purchase "+t}},{key:"create_Seller_Notification_Response",value:function(e,t,a,n){return"You have "+n+" "+e+"'s request to purchase "+t+" for "+a}},{key:"display_Correct_Notification_Body",value:function(e){return e.seller_email===this.props.myEmail?"pending"===e.response?r.a.createElement("p",null,this.create_Seller_Request_Notification(e.buyer_displayname,e.meal_name,e.meal_price)):r.a.createElement("p",null,this.create_Seller_Notification_Response(e.buyer_displayname,e.meal_name,e.meal_price,e.response)):"pending"===e.response?r.a.createElement("p",null,this.create_Buyer_Request_Notification(e.seller_displayname,e.meal_name,e.meal_price)):r.a.createElement("p",null,this.create_Buyer_Notification_Response(e.seller_displayname,e.meal_name,e.meal_price,e.response))}},{key:"update_Request_Status",value:function(e,t){w.a.database().ref("requests/"+e+"/response").set(t)}},{key:"display_Notification",value:function(e){var t=this;return r.a.createElement("li",{key:e.meal_id},r.a.createElement(j.a,{className:"avatar",size:"50px",round:"50px",src:e.meal_imgsrc}),this.display_Correct_Notification_Body(e),r.a.createElement("button",{className:"accept-bttn",onClick:function(){return t.update_Request_Status(e.meal_id,"accepted")}},"accept"),r.a.createElement("button",{className:"decline-bttn",onClick:function(){return t.update_Request_Status(e.meal_id,"declined")}},"decline"))}},{key:"render",value:function(){var e=this.props.notifications.map(this.display_Notification);return r.a.createElement("div",{className:"item-container"},r.a.createElement("ul",{className:"item-list"},e))}}]),a}(n.Component)),O=a(118),S=a.n(O),I=localStorage.email,k=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(m.a)(this,a),(n=t.call(this,e)).promise_setState=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new Promise((function(e){n.setState(t,e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.Read_Notifications=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!1!==n.state.show){e.next=9;break}return e.next=4,n.promise_setState({show:!0});case 4:return e.next=6,n.Load_Notifications_From_Firebase(n.state.email);case 6:n.Relax_Notification_Bell(),e.next=12;break;case 9:return e.next=11,n.promise_setState({notifications:[],show:!1});case 11:n.Relax_Notification_Bell();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.Load_Request_From_Firebase=function(){var e=Object(c.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(g.a)(n),w.a.database().ref("requests").child(t).once("value",(function(e){var t=e.val(),n=a.state.notifications.concat(t);a.promise_setState({notifications:n}).then((function(e){}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.Load_Notifications_From_Firebase=function(){var e=Object(c.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(g.a)(n),w.a.database().ref("users/"+t).child("purchase_requests").on("child_added",(function(e){if(!0===a.state.show){var t=e.key;a.Load_Request_From_Firebase(t)}else!1===a.state.show&&a.Update_Notification_Bell()}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var r=localStorage.getItem("email");return n.state={notifications:[],purchase_requests:[],show:!1,added:!1,hasNewNotifications:!1,bellColor:"#000000",email:r.split(".").join("_DOT_")},n.Read_Notifications=n.Read_Notifications.bind(Object(g.a)(n)),n.Load_Notifications_From_Firebase=n.Load_Notifications_From_Firebase.bind(Object(g.a)(n)),n.Load_Request_From_Firebase=n.Load_Request_From_Firebase.bind(Object(g.a)(n)),n.promise_setState=n.promise_setState.bind(Object(g.a)(n)),n}return Object(u.a)(a,[{key:"Update_Notification_Bell",value:function(){this.setState({hasNewNotifications:!0,bellColor:"#ff2121"})}},{key:"Relax_Notification_Bell",value:function(){this.setState({hasNewNotifications:!1,bellColor:"#000000"})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"navbar bg-light navbar-expand-md fixed-top top-menu justify-content-between shadow"},r.a.createElement(N.c,{to:"../"},r.a.createElement("div",{className:"nav-link"},"Food Network")),r.a.createElement("div",{className:"navbar-nav"},r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},r.a.createElement(N.c,{to:"/newItem"},r.a.createElement("div",{className:"nav-link"},r.a.createElement("div",{className:"fas fa-plus"}))),r.a.createElement("div",{className:"nav-link","data-toggle":"collapse","data-target":"#searchbar","aria-expanded":"false"},r.a.createElement("i",{className:"fas fa-search"})),r.a.createElement(N.c,{to:"/"},r.a.createElement("div",{className:"nav-link"},r.a.createElement("i",{className:"fas fa-envelope"}))),r.a.createElement(S.a,{width:"20",onClick:this.Read_Notifications,type:"submit",active:this.state.hasNewNotifications,animate:this.state.hasNewNotifications,color:this.state.bellColor}),r.a.createElement(N.c,{to:{pathname:"/profile/".concat(I)}},r.a.createElement("div",{className:"nav-link"},r.a.createElement("i",{className:"fas fa-user-friends"})))),r.a.createElement("div",{className:"nav-link","data-toggle":"collapse","data-target":"#sidebar","aria-expanded":"false"},r.a.createElement("i",{className:"fas fa-bars"})))),r.a.createElement(x,{notifications:this.state.notifications,myEmail:localStorage.getItem("email").split(".").join("_DOT_")}))}}]),a}(n.Component),C=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).inputKeyDown=function(t){var a=t.target.value;if("Enter"===t.key&&a){if(e.state.tags.find((function(e){return e.toLowerCase()===a.toLowerCase()})))return;e.setState({tags:[].concat(Object(v.a)(e.state.tags),[a.toLowerCase()])},(function(){e.props.updateMealTags(e.state.tags)})),e.tagInput.value=null}else"Backspace"!==t.key||a||e.removeTag(e.state.tags.length-1)},e.removeTag=function(t){var a=Object(v.a)(e.state.tags);a.splice(t,1),e.setState({tags:a},(function(){e.props.updateMealTags(e.state.tags)}))},e.state={tags:[]},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"input-tag"},this.state.tags.map((function(t,a){return r.a.createElement(y.a,{variant:"primary",key:t},t,r.a.createElement("button",{type:"button",onClick:function(){e.removeTag(a)}},"x"))})),r.a.createElement("input",{type:"text",placeholder:"Enter tags...",onKeyDown:this.inputKeyDown,ref:function(t){e.tagInput=t}}))}}]),a}(n.Component),F=a(34),T=a.n(F),P=a(19),D=a.n(P),M=a(846);T.a.config.region="us-west-2",T.a.config.credentials=new T.a.CognitoIdentityCredentials({IdentityPoolId:"us-west-2:cb1b59d8-6d8b-4d56-a187-5b91922f84d7"});var q="";T.a.config.update({region:"us-west-2",credentials:new T.a.CognitoIdentityCredentials({IdentityPoolId:"us-west-2:b8d920b2-21d8-4843-80a3-9dadec543d92"})});var L=new T.a.S3({apiVersion:"2006-03-01",params:{Bucket:"foodimagebucket"}}),R=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).handleValueChange=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.mealPriceInput.value=t;case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.addPhoto=Object(c.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=document.getElementById("photoFile").files).length){e.next=3;break}return e.abrupt("return",alert("Please choose a file to upload first."));case 3:a=t[0],q=a.name,n={Body:a,Bucket:"foodimagebucket",Key:q},L.putObject(n,(function(e,t){e?console.log(e,e.stack):console.log(t)}));case 7:case"end":return e.stop()}}),e)}))),n.updateMealTags=function(e){n.setState({mealTags:e.map((function(e){return e.toLowerCase()}))})},n.updateIngredientTags=function(e){n.setState({ingredientTags:e.map((function(e){return e.toLowerCase()}))})},n.updateAllergyTags=function(e){n.setState({allergyTags:e.map((function(e){return e.toLowerCase()}))})},n.handleAddMeal=Object(c.a)(o.a.mark((function e(){var t,a,r,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(M.a)(),console.log(a),n.addPhoto(),r=localStorage.getItem("email"),console.log(r),"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/listings","https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/user",s={mealID:a,mealDescription:n.mealDescriptionInput.current.value,mealImagePath:"https://foodimagebucket.s3-us-west-2.amazonaws.com/"+q,mealName:n.mealNameInput.current.value,mealPrice:n.state.amount,mealQuantity:n.mealQuantityInput.current.value,mealTags:n.state.mealTags,mealIngredients:n.state.ingredientTags,mealAllergy:n.state.allergyTags,userEmail:localStorage.getItem("email")},i={mealID:a,userEmail:localStorage.getItem("email")},console.log("The value of _data:\n"+JSON.stringify(s)),console.log("The value of _data2:\n"+JSON.stringify(i)),D.a.ajax({url:"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/listings",type:"POST",headers:{accept:"application/json"},crossDomain:!0,data:JSON.stringify(s),success:function(e){console.log("Meal table MealPut success\n"),console.log(e)},error:function(e,t,a){console.log("Meal table MealPut failure"),console.log(JSON.stringify(e))}}),D.a.ajax((t={url:"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/user",type:"PUT",dataType:"jsonp",headers:{accept:"application/json"},crossDomain:!0,data:JSON.stringify(i)},Object(f.a)(t,"dataType","json"),Object(f.a)(t,"contentType","application/json; charset=utf-8"),Object(f.a)(t,"success",(function(e){console.log("User table MealPut success\n"),console.log(e)})),Object(f.a)(t,"error",(function(e,t,a){console.log("User table MealPut failure"),console.log(JSON.stringify(e))})),t)),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e)}))),n.state={amount:0,mealTags:[],ingredientTags:[],allergyTags:[]},n.handleChange=n.handleChange.bind(Object(g.a)(n)),n.mealNameInput=r.a.createRef(),n.mealPriceInput=r.a.createRef(),n.mealDescriptionInput=r.a.createRef(),n.mealQuantityInput=r.a.createRef(),n.mealTagsInput=r.a.createRef(),n.mealIngredientsInput=r.a.createRef(),n.mealAllergyInput=r.a.createRef(),n.s3Url="",n}return Object(u.a)(a,[{key:"handleChange",value:function(e,t,a){this.setState({amount:t})}},{key:"render",value:function(){var e=this;this.props.updateMealTags;return r.a.createElement("div",{class:"mt-4 p-4"},r.a.createElement(k,null),r.a.createElement(h,{labelName:"What is your meal?",placeHolder:"Hamburger, Tofu, Sushi...",input:this.mealNameInput}),r.a.createElement("div",{class:"row justify-content-center p-4 border bg-light",id:"photo-and-description"},r.a.createElement("form",{class:"md-form w-50 p-4"},r.a.createElement("div",{class:"file-field"},r.a.createElement("div",{class:"z-depth-1-half mb-4"},r.a.createElement("img",{id:"FoodImage",src:"https://mdbootstrap.com/img/Photos/Others/placeholder.jpg",class:"img-fluid",alt:"example placeholder"}))),r.a.createElement("div",{class:"d-flex justify-content-center"},r.a.createElement("div",{class:"btn btn-mdb-color btn-rounded float-left"},r.a.createElement("span",null,"Choose file"),r.a.createElement("input",{type:"file",id:"photoFile"}))),r.a.createElement("label",{htmlFor:"mealTags"},"Meal Tags:"),r.a.createElement(C,{id:"mealTags",updateMealTags:this.updateMealTags}),r.a.createElement("label",{htmlFor:"ingredientTags"},"Ingredients:"),r.a.createElement(C,{id:"ingredientTags",updateMealTags:this.updateIngredientTags}),r.a.createElement("label",{htmlFor:"allergyTags"},"Allergies:"),r.a.createElement(C,{id:"allergyTags",updateMealTags:this.updateAllergyTags})),r.a.createElement("div",{label:"right column",class:"w-50 p-4"},r.a.createElement("div",{label:"food-description"},r.a.createElement("label",{htmlFor:"foodDescriptionBox"},"Food Description"),r.a.createElement("textarea",{class:"form-control rounded-0",id:"foodDescriptionBox",rows:"10",ref:this.mealDescriptionInput})),r.a.createElement("label",{htmlFor:"price"},"Price:"),r.a.createElement("div",null,r.a.createElement(b.a,{value:this.state.amount,onChangeEvent:this.handleChange})),r.a.createElement(h,{labelName:"Quantity",placeHolder:"",input:this.mealQuantityInput}),r.a.createElement("button",{class:"btn btn-success mt-4",type:"button",onClick:function(){return e.handleAddMeal()}},"Submit Listing"))))}}]),a}(n.Component),A=a(74),U=a(283),z=(a(745),a(128)),B=a.n(z),J=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).getPosterEmail=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.props.meal.poster,n.loadUserInfo(t).then((function(e){console.log(e.Item.displayname),n.setState({posterName:e.Item.displayname})}));case 2:case"end":return e.stop()}}),e)}))),n.handleSubmit=function(){var e=Object(c.a)(o.a.mark((function e(t){var a,r,s,i,l,m,u,p;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=n.props,r=a.stripe,s=a.elements,i=n.props.meal,l=n.props.user,console.log("SUBMIT"),m=n.state.posterName,console.log(m),r&&s){e.next=9;break}return e.abrupt("return");case 9:u="?mealId="+n.props.mealId,p="https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/payment/"+u,console.log(p),D.a.ajax({url:p,type:"GET",headers:{accept:"application/json"},success:function(){var e=Object(c.a)(o.a.mark((function e(t){var a,n,c,u;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),a=t.client_secret,e.next=4,r.confirmCardPayment(a,{payment_method:{card:s.getElement(A.CardElement),billing_details:{name:"John Doe"}}});case 4:(n=e.sent).error?console.log(n.error.message):"succeeded"===n.paymentIntent.status&&(console.log(i),console.log(i.mealID),console.log(i.mealImagePath),console.log(i.mealName),console.log(i.mealPrice),console.log(localStorage.getItem("email").split(".").join("_DOT_")),console.log(l.displayname),console.log(l.email.split(".").join("_DOT_")),c=B.a.database().ref("requests"),u=c.push().getKey(),console.log("Key: "+u),c.child(u).set({meal_id:u,meal_imgsrc:i.mealImagePath,meal_name:i.mealName,meal_price:i.mealPrice,response:"pending",seller_displayname:m,seller_email:i.poster.split(".").join("_DOT_"),buyer_displayname:l.displayname,buyer_email:localStorage.getItem("email").split(".").join("_DOT_")}).then((function(e){console.log("What is the value of the key?: "+u),B.a.database().ref("users/"+i.poster.split(".").join("_DOT_")).child("purchase_requests").child(u).set(!0),B.a.database().ref("users/"+localStorage.getItem("email").split(".").join("_DOT_")).child("purchase_requests").child(u).set(!0)})),console.log("Payment succeeded"),window.setTimeout(null,3e3),window.location.href="/");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),error:function(e){console.log("Error: ".concat(e))}});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={posterName:{}},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getPosterEmail(),console.log(this.state.posterName)}},{key:"loadUserInfo",value:function(e){var t="/user/"+e,a="https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/pj_stage_01";return a=a.concat(t),D.a.ajax({url:a,type:"GET",crossDomain:!0,contentType:"application/json",success:function(e){console.log(e)},error:function(e){console.log(e)}})}},{key:"render",value:function(){var e=this.props.stripe;return r.a.createElement("form",{id:"paymentSubmit",className:"collapse mx-auto p-3 border border-secondary rounded",onSubmit:this.handleSubmit},r.a.createElement(A.CardElement,{options:{style:{base:{fontSize:"20px",color:"#424770","::placeholder":{color:"#aab7c4"}}},invalid:{color:"#9e2146"}}}),r.a.createElement("button",{id:"paymentSubmitButton",type:"submit",disabled:!e},"Pay"))}}]),a}(n.Component),Q=Object(U.a)("pk_test_kZQuSeuPP44KCF82f1BV8s7I00uch6juFm"),G=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.meal,a=[],n=[];return t.mealTags&&(a=t.mealTags.map((function(e){return r.a.createElement("div",{className:"mx-1"},e)}))),t.allergens&&(n=t.allergens.map((function(e){return r.a.createElement("div",{className:"mx-1"},e)}))),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{id:"viewListing",className:"container w-100",style:{margin:"10vh auto"}},r.a.createElement("div",{className:"column border bg-light pt-2",id:"photo-and-description"},r.a.createElement("h2",{id:"title",className:"mt-4 mb-2 pl-5"}),r.a.createElement("div",{className:"border-top row mx-0"},r.a.createElement("div",{id:"image",className:"column w-50 file-field"},r.a.createElement("img",Object(f.a)({src:t.mealImagePath,alt:t.imgAlt,className:"my-0 mx-auto d-block",style:{maxWidth:"50%"}},"alt","example placeholder"))),r.a.createElement("div",{id:"description",className:"column w-50 p-4"},r.a.createElement("div",{className:"border p-2"},r.a.createElement("h3",null,t.mealName),r.a.createElement("div",null,t.mealDescription)))),r.a.createElement("div",{id:"tags",className:"border-top px-4 row mx-0"},r.a.createElement("div",{className:"w-50 col"},r.a.createElement("div",{className:"my-4"},r.a.createElement("div",{className:"ml-4 text-secondary"},"Tags"),r.a.createElement("div",{className:"mx-2 border-top container"},r.a.createElement("div",{className:"mx-1 d-flex row"},a))),r.a.createElement("div",{className:"my-4"},r.a.createElement("div",{className:"ml-4 text-secondary"},"Allergies"),r.a.createElement("div",{className:"mx-2 border-top container"},r.a.createElement("div",{className:"row mx-1"},n)))),r.a.createElement("div",{className:"w-50 py-4"},r.a.createElement("div",{id:"purchase-form",className:"border w-75 mx-auto py-2 bg-light",style:{zIndex:1,position:"relative",top:"-10vh"}},r.a.createElement("div",{className:"row mt-1 mx-0 px-3 pb-2 align-content-between"},r.a.createElement("div",{className:"column w-50"},r.a.createElement("img",{src:"/imgs/profile_default.jpg",className:"rounded-circle",style:{height:"40px"},alt:"profile"}),r.a.createElement("div",null,t.poster)),r.a.createElement("div",{className:"column w-50 align-self-center"},r.a.createElement("div",{id:"price",className:"align-self-center"},"$",t.mealPrice," per item"))),r.a.createElement("div",{className:"border-top column pt-2 px-2"},r.a.createElement("div",{className:"row mx-0 justify-content-end px-2"},r.a.createElement("div",{className:"border py-1 px-4 w-50"},r.a.createElement("div",{className:"text-secondary",style:{fontSize:"11px"}},"Quantity"),r.a.createElement("div",{className:"ml-1",style:{fontSize:"18px"}},t.mealQuantity))),r.a.createElement("div",{className:"row mx-0 mt-2"},r.a.createElement("button",{className:"btn btn-secondary mx-auto w-75"},"Message Seller")),r.a.createElement("div",{className:"row mx-0 mt-2","data-toggle":"collapse","data-target":"#paymentSubmit","aria-expanded":"false"},r.a.createElement("button",{className:"btn btn-primary mx-auto w-75"},"Request Purchase")))))))),r.a.createElement(A.Elements,{stripe:Q},r.a.createElement(A.ElementsConsumer,null,(function(t){var a=t.elements,n=t.stripe;return r.a.createElement(J,{elements:a,stripe:n,mealId:e.props.meal.mealID,meal:e.props.meal,user:e.props.user})}))))}}]),a}(n.Component),K=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.meal;return r.a.createElement("div",{className:"modal fade",id:"exampleModalCenter",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},r.a.createElement("div",{className:"modal-dialog",role:"document"},r.a.createElement("div",{className:"modal-content",style:{backgroundImage:"url("+e.mealImagePath+")",backgroundSize:"120%"}},r.a.createElement("div",{className:"modal-body text-white px-0 py-0 w-100",style:{height:"500px",width:"500px"}},r.a.createElement("div",{className:"modal-text mx-0 pl-3 pt-3 row d-flex align-content-between"},r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{id:"modal-name",className:"font-weight-light mb-1",style:{fontSize:"20px"}},e.mealName),r.a.createElement("div",{id:"modal-location",className:"row mx-0"},r.a.createElement("i",{className:"fas fa-map-marker-alt"}),r.a.createElement("div",{className:"row mx-0"},r.a.createElement("div",{className:"ml-2"},"Seattle, WA")," ",r.a.createElement("div",{className:"ml-2"},"0.8 miles"))),r.a.createElement("div",{id:"modal-price",className:"font-weight-bold"},"Price: $",e.mealPrice)),r.a.createElement("div",{className:"col-6 text-right"},r.a.createElement("div",{className:"mb-2"},"Description: ",e.mealDescription),r.a.createElement(N.c,{to:"/listing"},r.a.createElement("button",{className:"btn btn-info","data-toggle":"modal","data-target":"#exampleModalCenter"},"View Listing"))))))))}}]),a}(n.Component),H=(n.Component,function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.foodItems.map((function(t,a){return r.a.createElement(W,{key:t.mealID,id:t.mealID,name:t.mealName,price:t.mealPrice,description:t.mealDescription,imgUrl:t.mealImagePath,imgAlt:t.imgAlt,getMealFunc:e.props.getMealById})}));return r.a.createElement("div",{className:"container mt-5 py-3 px-0"},r.a.createElement("div",{className:"row justify-content-center mx-0 listing-group"},t))}}]),a}(n.Component)),W=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.name,n=t.price,s=t.imgUrl,i=t.imgAlt;return r.a.createElement("span",{className:"mt-3 px-0 listing"},r.a.createElement("img",{src:s,alt:i,className:"w-100 h-100",onClick:function(){return e.props.getMealFunc(e.props.id)},"data-toggle":"modal","data-target":"#exampleModalCenter"}),r.a.createElement("div",{id:"card-text",className:"cardText pl-2 pt-1 w-100"},r.a.createElement("div",{className:"text-left"},r.a.createElement("div",{className:""},a),r.a.createElement("div",{className:"font-weight-bold pt-1 pl-1"},"$",n))))}}]),a}(n.Component),V=H;T.a.config.region="us-west-2",T.a.config.credentials=new T.a.CognitoIdentityCredentials({IdentityPoolId:"us-west-2:cb1b59d8-6d8b-4d56-a187-5b91922f84d7"});var X="";T.a.config.update({region:"us-west-2",credentials:new T.a.CognitoIdentityCredentials({IdentityPoolId:"us-west-2:b8d920b2-21d8-4843-80a3-9dadec543d92"})});var $=new T.a.S3({apiVersion:"2006-03-01",params:{Bucket:"foodimagebucket"}}),Y=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;Object(m.a)(this,a),(n=t.call(this,e)).loadPostings=function(e){var t="/listings/"+String(e).trim(),a="https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/pj_stage_01";return a=a.concat(t),D.a.ajax({url:a,type:"GET",crossDomain:!0,contentType:"application/json",dataType:"json",success:function(e){console.log("Success finding meal info: \n"+JSON.stringify(e))},error:function(e){console.log(e)}})},n.handleDescriptionChange=function(e){n.setState({mealDescription:e.target.value})},n.handleNameChange=function(e){n.setState({mealName:e.target.value})},n.handleQuantityChange=function(e){n.setState({mealQuantity:e.target.value})},n.addPhoto=Object(c.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=document.getElementById("photoFile").files).length){e.next=3;break}return e.abrupt("return",alert("Please choose a file to upload first."));case 3:a=t[0],X=a.name,n={Body:a,Bucket:"foodimagebucket",Key:X},$.putObject(n,(function(e,t){e?console.log(e,e.stack):console.log(t)}));case 7:case"end":return e.stop()}}),e)}))),n.updateMealTags=function(e){n.setState({mealTags:e.map((function(e){return e.toLowerCase()}))})},n.updateIngredientTags=function(e){n.setState({ingredientTags:e.map((function(e){return e.toLowerCase()}))})},n.updateAllergyTags=function(e){n.setState({allergyTags:e.map((function(e){return e.toLowerCase()}))})},n.handleAddMeal=Object(c.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("email"),console.log(t),"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/listings",a={mealID:n.state.mealID,mealDescription:n.state.mealDescription,mealImagePath:n.state.mealImagePath,mealName:n.state.mealName,mealPrice:n.state.amount,mealQuantity:n.state.mealQuantity,mealTags:n.state.mealTags,mealIngredients:n.state.ingredientTags,mealAllergy:n.state.allergyTags,userEmail:localStorage.getItem("email")},console.log("The value of _data:\n"+JSON.stringify(a)),D.a.ajax({url:"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/listings",type:"POST",headers:{accept:"application/json"},crossDomain:!0,data:JSON.stringify(a),success:function(e){console.log("Meal table MealPut success\n"),console.log(e)},error:function(e,t,a){console.log("Meal table MealPut failure"),console.log(JSON.stringify(e))}}),e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})));n.props.meal,localStorage.getItem("mealID");return n.state={mealName:"",mealImagePath:"",mealQuantity:"",mealDescription:"",amount:0,mealTags:[],ingredientTags:[],allergyTags:[],mealID:localStorage.getItem("mealID"),curMeal:{}},n.handleDescriptionChange=n.handleDescriptionChange.bind(Object(g.a)(n)),n.handleNameChange=n.handleNameChange.bind(Object(g.a)(n)),n.handleQuantityChange=n.handleQuantityChange.bind(Object(g.a)(n)),n.handleValueChange=n.handleValueChange.bind(Object(g.a)(n)),n.fillFields=n.fillFields.bind(Object(g.a)(n)),n.mealNameInput=r.a.createRef(),n.mealPriceInput=r.a.createRef(),n.mealDescriptionInput=r.a.createRef(),n.mealQuantityInput=r.a.createRef(),n.mealTagsInput=r.a.createRef(),n.mealIngredientsInput=r.a.createRef(),n.mealAllergyInput=r.a.createRef(),n.s3Url="",n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.fillFields(),this.render(),console.log("MOUNT")}},{key:"fillFields",value:function(){var e=this;console.log("Trying to fill the fields"),this.loadPostings(this.state.mealID).then((function(t){e.setState({curMeal:t.Item}),console.log("MEAL IN FILL FIELDS: "+JSON.stringify(e.state.curMeal)),e.setState({mealName:e.state.curMeal.mealName}),e.setState({mealImagePath:e.state.curMeal.mealImagePath}),e.setState({mealDescription:e.state.curMeal.mealDescription}),e.setState({mealTags:e.state.curMeal.mealTags}),e.setState({allergyTags:e.state.curMeal.allergens}),e.setState({ingredientTags:e.state.curMeal.ingredients}),e.setState({amount:e.state.curMeal.mealPrice}),e.setState({mealQuantity:e.state.curMeal.mealQuantity})})),console.log("curMeal: \n"+JSON.stringify(this.state.curMeal))}},{key:"handleValueChange",value:function(e,t,a){this.setState({amount:t})}},{key:"render",value:function(){var e=this;console.log("I have rendered the UpdateItemPage");this.props.updateMealTags;return r.a.createElement("div",{class:"mt-2 p-4"},r.a.createElement(k,null),r.a.createElement(h,{labelName:"What is your meal?",placeHolder:this.state.mealName,input:this.mealNameInput,onChange:this.handleNameChange}),r.a.createElement("div",{class:"row justify-content-center p-4 border bg-light",id:"photo-and-description"},r.a.createElement("form",{class:"md-form w-50 p-4"},r.a.createElement("label",{htmlFor:"mealTags"},"Meal Tags:"),r.a.createElement(C,{id:"mealTags",updateMealTags:this.updateMealTags}),r.a.createElement("label",{htmlFor:"ingredientTags"},"Ingredients:"),r.a.createElement(C,{id:"ingredientTags",updateMealTags:this.updateIngredientTags}),r.a.createElement("label",{htmlFor:"allergyTags"},"Allergies:"),r.a.createElement(C,{id:"allergyTags",updateMealTags:this.updateAllergyTags})),r.a.createElement("div",{label:"right column",class:"w-50 p-4"},r.a.createElement("div",{label:"food-description"},r.a.createElement("label",{htmlFor:"foodDescriptionBox"},"Food Description"),r.a.createElement("textarea",{class:"form-control rounded-0",id:"foodDescriptionBox",rows:"10",ref:this.mealDescriptionInput,placeholder:this.state.mealDescription,onChange:this.handleDescriptionChange})),r.a.createElement("label",{htmlFor:"price"},"Price:"),r.a.createElement("div",null,r.a.createElement(b.a,{value:this.state.amount,onChangeEvent:this.handleValueChange})),r.a.createElement(h,{labelName:"Quantity",placeHolder:this.state.mealQuantity,input:this.mealQuantityInput,onChange:this.handleQuantityChange}),r.a.createElement("button",{class:"btn btn-success mt-4",type:"button",onClick:function(){return e.handleAddMeal()}},"Submit Listing"))))}}]),a}(n.Component),Z=a(24),ee=a(58),te=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n,r;return Object(m.a)(this,a),(r=t.call(this,e)).handleCreateNewUser=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Trying to add user to DB"),"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/pj-stage-login-v2/user",t={firstname:r.state.firstName,lastname:r.state.lastName,username:r.state.username,email:r.state.email,location:r.state.location,hasAgreedToTerms:r.state.hasAgreedToTerms},D.a.ajax({url:"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/pj-stage-login-v2/user",type:"POST",crossDomain:!0,contentType:"application/json",data:JSON.stringify(t),success:function(e){console.log("Successfully created new user")},error:function(e){console.log("Unable to create new user: "+e)}}),e.abrupt("return",!1);case 5:case"end":return e.stop()}}),e)}))),r.Check_If_User_Exists_In_DB=Object(c.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/email/?email="+String(r.state.email),console.log("The email we are checking to see if it is in the DB: "+t),a=(a="https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/pj-stage-login-v2").concat(t),e.abrupt("return",D.a.ajax({url:a,type:"GET",crossDomain:!0,contentType:"application/json",dataType:"json",header:{accept:"application/json","Access-Control-Allow-Origin":"*"},success:function(e){console.log("Inside AJAX"),console.log(e.toString()),console.log(e.valueOf("length"))},error:function(e){console.log(e)}}));case 5:case"end":return e.stop()}}),e)}))),r.state=(n={firstName:"",lastName:"",username:"",email:""},Object(f.a)(n,"firstName",""),Object(f.a)(n,"lastName",""),Object(f.a)(n,"city",""),Object(f.a)(n,"state",""),Object(f.a)(n,"street",""),Object(f.a)(n,"zip",""),Object(f.a)(n,"code",""),Object(f.a)(n,"step",0),n),r.handleChange=r.handleChange.bind(Object(g.a)(r)),r.updateFirstName=r.updateFirstName.bind(Object(g.a)(r)),r.updateLastName=r.updateLastName.bind(Object(g.a)(r)),r.updateUserName=r.updateUserName.bind(Object(g.a)(r)),r.updateLocation=r.updateLocation.bind(Object(g.a)(r)),r.updateCode=r.updateCode.bind(Object(g.a)(r)),r.Sign_Up=r.Sign_Up.bind(Object(g.a)(r)),r.Confirm_Sign_Up=r.Confirm_Sign_Up.bind(Object(g.a)(r)),r.Check_If_User_Exists_In_DB=r.Check_If_User_Exists_In_DB.bind(Object(g.a)(r)),r.handleCreateNewUser=r.handleCreateNewUser.bind(Object(g.a)(r)),r}return Object(u.a)(a,[{key:"updateFirstName",value:function(e){this.setState({firstName:e.target.value})}},{key:"updateLastName",value:function(e){this.setState({lastName:e.target.value})}},{key:"updateUserName",value:function(e){this.setState({username:e.target.value})}},{key:"updateLocation",value:function(e){this.setState({location:e.target.value})}},{key:"updateCode",value:function(e){this.setState({code:e.target.value})}},{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(f.a)({},n,a))}},{key:"Sign_Up",value:function(){var e=Object(c.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.state.email,n=this.state.password,console.log("what is email: ",a),console.log("what is password: ",n),e.prev=5,e.next=8,ee.a.signUp({username:a,password:n});case 8:console.log("Signed up successfully!"),this.handleCreateNewUser(),this.setState({step:1}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.log("Error signing up: ",e.t0);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"Confirm_Sign_Up",value:function(){var e=Object(c.a)(o.a.mark((function e(t){var a,n,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a=this.state.email,n=this.state.code,e.prev=3,e.next=6,ee.a.confirmSignUp(a,n);case 6:console.log("Successfully confirmed signup!"),this.handleCreateNewUser(),r=w.a.database().ref("users"),s=(s=this.state.email).split(".").join("_DOT_"),console.log("FIREBASE EMAIL"+s),r.child(s).set({imgsrc:"https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcTXIqGqYQQW5zSXHNxhx1ZzvNgj4W7xDosW0ERkkoHwX94HMwbv&usqp=CAU",email:s,displayname:this.state.username}),this.setState({step:0}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(3),console.log("Unable to confirm sign up: ",e.t0);case 19:case"end":return e.stop()}}),e,this,[[3,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"FormCenter"},0===this.state.step&&r.a.createElement("form",{className:"FormFields",onSubmit:this.Sign_Up},r.a.createElement("div",{className:"FormField"},r.a.createElement("label",{className:"FormField__Label",htmlFor:"firstName"},"First Name"),r.a.createElement("input",{type:"text",id:"firstName",className:"FormField__Input",placeholder:"Enter your first name",name:"firstName",required:"required",value:this.state.firstName,onChange:this.updateFirstName.bind(this)})),r.a.createElement("div",{className:"FormField"},r.a.createElement("label",{className:"FormField__Label",htmlFor:"lastName"},"Last Name"),r.a.createElement("input",{type:"text",id:"lastName",className:"FormField__Input",placeholder:"Enter your last name",name:"lastName",required:"required",value:this.state.lastName,onChange:this.updateLastName.bind(this)})),r.a.createElement("div",{className:"FormField"},r.a.createElement("label",{className:"FormField__Label",htmlFor:"email"},"Email Address"),r.a.createElement("input",{type:"email",id:"email",className:"FormField__Input",placeholder:"Enter your Email Address",name:"email",required:"required",value:this.state.email,onChange:this.handleChange})),r.a.createElement("div",{className:"FormField"},r.a.createElement("label",{className:"FormField__Label",htmlFor:"username"},"Username"),r.a.createElement("input",{type:"username",id:"username",className:"FormField__Input",placeholder:"Choose a username",name:"username",required:"required",value:this.state.username,onChange:this.updateUserName.bind(this)})),r.a.createElement("div",{className:"FormField"},r.a.createElement("label",{className:"FormField__Label",htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",className:"FormField__Input",placeholder:"Enter your password",name:"password",required:"required",value:this.state.password,onChange:this.handleChange})),r.a.createElement("div",{className:"FormField"},r.a.createElement("label",{className:"FormField__Label",htmlFor:"city"},"City"),r.a.createElement("input",{type:"text",id:"city",className:"FormField__Input",placeholder:"Enter your city",name:"city",required:"required",value:this.state.location,onChange:this.updateLocation.bind(this)})),r.a.createElement("div",{className:"FormField"},r.a.createElement("label",{className:"FormField__CheckboxLabel"},r.a.createElement("input",{className:"FormField__Checkbox",type:"checkbox",name:"hasAgreed",required:"required",value:this.state.hasAgreedToTerms,onChange:this.handleChange}),"I agree to the statements in ",r.a.createElement("a",{href:"a",className:"FormField__TermsLink"},"terms of service"))),r.a.createElement("div",{className:"FormField"},r.a.createElement("button",{className:"FormField__Button mr-20"}," Sign Up"),r.a.createElement(N.b,{to:"/sign-in",className:"FormField__Link"},"I'm already a member"))),1===this.state.step&&r.a.createElement("form",{className:"FormFields",onSubmit:this.Confirm_Sign_Up},r.a.createElement("div",{className:"FormField"},r.a.createElement("label",{className:"FormField__Label",htmlFor:"email"},"Email Address"),r.a.createElement("input",{type:"email",id:"email",className:"FormField__Input",placeholder:"Enter your Email Address",name:"email",required:"required",value:this.state.email,onChange:this.handleChange.bind(this)})),r.a.createElement("div",{className:"FormField"},r.a.createElement("label",{className:"FormField__Label",htmlFor:"authenticationCode"},"Authentication Code"),r.a.createElement("input",{type:"text",id:"authenticationCode",className:"FormField__Input",placeholder:"Enter Authentication Code",name:"authenticationCode",required:"required",value:this.state.code,onChange:this.updateCode.bind(this)})),r.a.createElement("div",{className:"FormField"},r.a.createElement("button",{className:"FormField__Button mr-20"}," Confirm Signup"),r.a.createElement(N.b,{to:"/sign-in",className:"FormField__Link"},"I'm already a member"))))}}]),a}(n.Component),ae=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",jwt:""},n.handleChange=n.handleChange.bind(Object(g.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(g.a)(n)),n}return Object(u.a)(a,[{key:"handleChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(f.a)({},n,a))}},{key:"handleSubmit",value:function(){var e=Object(c.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,ee.a.signIn(this.state.email,this.state.password);case 4:return e.sent,console.log("Auth"),e.next=8,ee.a.currentSession();case 8:a=e.sent,console.log(a.idToken.jwtToken),console.log(this.state.email),localStorage.setItem("token",a.idToken.jwtToken),localStorage.setItem("email",this.state.email),window.location.href="/",e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),console.log(e.t0);case 19:case"end":return e.stop()}}),e,this,[[1,16]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"FormCenter"},r.a.createElement("form",{className:"FormFields",onSubmit:this.handleSubmit},r.a.createElement("div",{className:"FormField"},r.a.createElement("label",{className:"FormField__Label",htmlFor:"email"},"Email Address"),r.a.createElement("input",{type:"email",id:"email",className:"FormField__Input",placeholder:"Enter your Email Address",name:"email",required:"required",value:this.state.email,onChange:this.handleChange})),r.a.createElement("div",{className:"FormField"},r.a.createElement("label",{className:"FormField__Label",htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",className:"FormField__Input",placeholder:"Enter your password",name:"password",required:"required",value:this.state.password,onChange:this.handleChange})),r.a.createElement("div",{className:"FormField"},r.a.createElement("button",{className:"FormField__Button mr-20"}," Sign In "),r.a.createElement(N.b,{to:"/",className:"FormField__Link"},"Create an account"))))}}]),a}(n.Component),ne=(a(835),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(N.a,null,r.a.createElement("div",{className:"Appp"},r.a.createElement("div",{className:"App__Aside"}),r.a.createElement("div",{className:"App__Form"},r.a.createElement("div",{className:"PageSwitcher"},r.a.createElement(N.c,{to:"/sign-in",className:"PageSwitcher__Item",activeClassName:"PageSwitcher__Item PageSwitcher__Item--Active"},"Sign In"),r.a.createElement(N.c,{exact:!0,to:"/",className:"PageSwitcher__Item",activeClassName:"PageSwitcher__Item PageSwitcher__Item--Active"},"Sign Up")),r.a.createElement("div",{className:"FormTitle"},r.a.createElement(N.c,{to:"/sign-in",activeClassName:"FormTitle__Link FormTitle__Link--Active",className:"FormTitle__Link"},"Sign In"),"or",r.a.createElement(N.c,{exact:!0,to:"/",activeClassName:"FormTitle__Link FormTitle__Link--Active",className:"FormTitle__Link"},"Sign Up")),r.a.createElement(Z.a,{exact:!0,path:"/",component:te}),r.a.createElement(Z.a,{path:"/sign-in",component:ae}))))}}]),a}(n.Component)),re=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"logOut",value:function(){localStorage.removeItem("token"),localStorage.removeItem("email"),window.location.reload()}},{key:"render",value:function(){var e=this,t=this.props,a=t.user,n=t.userListings;return r.a.createElement("div",{id:"sidebar",className:"sidebar collapse",style:{width:"230px",marginTop:"1vh",backgroundColor:"#393D3F",height:"95vh",position:"fixed",right:"0px"}},r.a.createElement("div",{id:"sidebar-header",className:"py-3",style:{color:"white",height:"130px",backgroundColor:"#282A2C"}},r.a.createElement("div",{id:"user_info",className:"row ml-0 mr-0"},r.a.createElement("img",{src:"imgs/profile_default.jpg",className:"rounded-circle ml-2 my-1 column",style:{height:"40px"},alt:"profile"}),r.a.createElement("div",{className:"column",id:"",style:{fontSize:"16px"}},r.a.createElement("div",{id:"username",className:"row ml-3 mr-0"},a.displayname),r.a.createElement("div",{id:"location",className:"row ml-3 mr-0",style:{fontSize:"14px"}},r.a.createElement("i",{className:"fas fa-map-marker-alt"}),r.a.createElement("div",{className:"ml-2"},a.city)))),r.a.createElement("hr",{className:"mt-3 mb-0",style:{backgroundColor:"#D8D8D8",opacity:"15%"}}),r.a.createElement("div",{id:"tabs",className:"row mx-0",style:{marginTop:"auto",height:"51%"}},r.a.createElement("div",{className:"column px-3 mr-1 border-right pt-2"},r.a.createElement("i",{className:"fas fa-sign-out-alt mt-2 mx-2"})),r.a.createElement("div",{className:"column pl-2 mr-1 pr-3 pt-2 border-right",style:{fontSize:"12px"}},r.a.createElement("div",null,"Followers"),r.a.createElement("div",null,"210")),r.a.createElement("div",{className:"column pl-2 pt-2",style:{fontSize:"12px"}},r.a.createElement("div",null,"Following"),r.a.createElement("div",null,"200")))),r.a.createElement("div",{id:"sidebar-list",className:"container px-0 listings",style:{color:"white"}},r.a.createElement("div",{className:"text-center font-weight-bold mt-2 py-1"},"My Listings"),r.a.createElement("hr",{className:"mt-2 mb-0",style:{backgroundColor:"#D8D8D8",opacity:"15%"}}),r.a.createElement("div",{className:"pl-3 pt-1 ml-2"},"Pending"),n.pending.length?r.a.createElement("div",{className:"row mx-0"},r.a.createElement("div",{className:"column ml-3"},r.a.createElement("img",{src:n.pending[0].mealImagePath,style:{width:"115px",height:"115px"},alt:"pending listing"})),r.a.createElement("div",{className:"column pl-2"},r.a.createElement("div",null,n.pending[0].mealName),r.a.createElement("div",{className:"font-weight-bold"},"$",n.pending[0].mealPrice))):"",r.a.createElement("hr",{className:"mt-3 mb-0",style:{backgroundColor:"#D8D8D8",opacity:"15%"}}),r.a.createElement("div",{className:"pl-3 pt-1 ml-2"},"Current Listings"),n.active.length?r.a.createElement("div",{className:"row mx-0"},r.a.createElement("div",{className:"column ml-3"},r.a.createElement("img",{src:n.active[0].mealImagePath,style:{width:"115px",height:"115px"},alt:"active listing"})),r.a.createElement("div",{className:"column pl-2"},r.a.createElement("div",null,n.active[0].mealName),r.a.createElement("div",{className:"font-weight-bold"},"$",n.active[0].mealPrice))):"",r.a.createElement("hr",{className:"mt-3 mb-0",style:{backgroundColor:"#D8D8D8",opacity:"15%"}}),r.a.createElement("div",{className:"pl-3 pt-1 ml-2"},"History"),n.sold.length?r.a.createElement("div",{className:"row mx-0"},r.a.createElement("div",{className:"column ml-3"},r.a.createElement("img",{src:n.sold[0].mealImagePath,style:{width:"115px",height:"115px"},alt:"sold listing"})),r.a.createElement("div",{className:"column pl-2"},r.a.createElement("div",null,n.sold[0].mealName),r.a.createElement("div",{className:"font-weight-bold"},"$",n.sold[0].mealPrice))):"",r.a.createElement("div",{id:"sidebar-buttons",className:"row mx-0 border-top",style:{fontSize:"28px",position:"absolute",bottom:0}},r.a.createElement("div",{onClick:function(){return e.logOut()},className:"column px-4 py-2 border-right"},r.a.createElement("i",{className:"fa fa-sign-out"})),r.a.createElement("div",{className:"column px-4 py-2 border-right"},r.a.createElement("i",{className:"fas fa-plus"})),r.a.createElement("div",{className:"column px-4 py-2"},r.a.createElement("i",{className:"fas fa-cog"})))))}}]),a}(n.Component),se=a(845),ie=a(843),le=a(288),oe=a(844),ce=a(295),me=a(292),ue=a(296),pe=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).state={rating:null},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.onSelect;return r.a.createElement("div",null,Object(v.a)(Array(5)).map((function(a,n){var s=n+1;return r.a.createElement("label",null,r.a.createElement("input",{type:"radio",name:"rating",value:s,onClick:function(){return e.setState({rating:s},(function(){t(e.state.rating)}))}}),r.a.createElement(ue.a,{className:"star",color:s<=e.state.rating?"#ffc107":"#e4e5e9",size:40}))})))}}]),a}(n.Component),de=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).clearInputs=function(){n.mealNameInput.current.value="",n.setState({minPrice:0}),n.setState({maxPrice:99})},n.mealNameInput=r.a.createRef(),n.state={minPrice:0,maxPrice:0},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.cities,n=t.selectedCity,s=t.updateSelectedCity,i=t.sortOptions,l=t.selectedSortOption,o=t.updateSortOption,c=t.getMeals,m=t.updateRequestedMeal,u=t.updatePriceRange,p=t.updateMealTags,d=t.updateRequestedRating;return r.a.createElement("div",{id:"searchbar",className:"mx-auto p-3 border border-secondary rounded collapse",style:{zIndex:10333,position:"absolute",left:"33%",backgroundColor:"white"}},r.a.createElement(se.a,null,r.a.createElement(se.a.Group,null,r.a.createElement(se.a.Control,{placeholder:"Meal Name",ref:this.mealNameInput})),r.a.createElement(se.a.Group,null,r.a.createElement(ie.a,null,r.a.createElement(le.a,null,r.a.createElement(b.a,{value:this.state.minPrice,onChangeEvent:function(t,a,n){e.setState({minPrice:a})}})),r.a.createElement(le.a,null,r.a.createElement(b.a,{value:this.state.maxPrice,onChangeEvent:function(t,a,n){e.setState({maxPrice:a})}})))),r.a.createElement(se.a.Group,null,r.a.createElement(pe,{onSelect:d})),r.a.createElement(se.a.Group,null,r.a.createElement(E,{updateMealTags:p}))),r.a.createElement(ie.a,{className:"px-3"},r.a.createElement(oe.a,{id:"dropdown-basic-button",className:"mx-3",title:n,onSelect:function(e){return s(e)}},a.map((function(e){return r.a.createElement(ce.a.Item,{eventKey:e},e)}))),r.a.createElement(oe.a,{id:"dropdown-basic-button",className:"mx-3",title:l,onSelect:function(e){return o(e)}},i.map((function(e){return r.a.createElement(ce.a.Item,{eventKey:e},e)}))),r.a.createElement(me.a,{className:"mx-3",variant:"primary",type:"button",onClick:function(){return e.clearInputs()}},"Clear"),r.a.createElement(me.a,{className:"mx-3",variant:"primary",type:"button",onClick:function(){m(e.mealNameInput.current.value),u(e.state.minPrice,e.state.maxPrice),c()},"data-toggle":"collapse","data-target":"#searchbar"},"Search")))}}]),a}(n.Component),fe=function(e,t){return"Name"===e?function(e){return e.sort((function(e,t){return e.mealName.toLowerCase()>t.mealName.toLowerCase()?1:-1}))}(t):"Date Posted"===e?function(e){return e.sort((function(e,t){return new Date(e.listingTimestamp)-new Date(t.listingTimestamp)}))}(t):function(e){return e.sort((function(e,t){return parseInt(e.mealPrice)>parseInt(t.mealPrice)?1:-1}))}(t)},ge=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).promise_setState=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new Promise((function(e){n.setState(t,e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.Read_Notifications=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!1!==n.state.show){e.next=9;break}return e.next=4,n.promise_setState({show:!0});case 4:return e.next=6,n.Load_Notifications_From_Firebase(n.state.email);case 6:n.Relax_Notification_Bell(),e.next=12;break;case 9:return e.next=11,n.promise_setState({notifications:[],show:!1});case 11:n.Relax_Notification_Bell();case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.Load_Request_From_Firebase=function(){var e=Object(c.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(g.a)(n),w.a.database().ref("requests").child(t).once("value",(function(e){var t=e.val(),n=a.state.notifications.concat(t);a.promise_setState({notifications:n}).then((function(e){}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.Load_Notifications_From_Firebase=function(){var e=Object(c.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(g.a)(n),w.a.database().ref("users/"+t).child("purchase_requests").on("child_added",(function(e){if(!0===a.state.show){var t=e.key;a.Load_Request_From_Firebase(t)}else!1===a.state.show&&a.Update_Notification_Bell()}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={notifications:[],purchase_requests:[],show:!1,added:!1,hasNewNotifications:!1,bellColor:"#000000",email:n.props.user.email.replace(".","_DOT_")},n.Read_Notifications=n.Read_Notifications.bind(Object(g.a)(n)),n.Load_Notifications_From_Firebase=n.Load_Notifications_From_Firebase.bind(Object(g.a)(n)),n.Load_Request_From_Firebase=n.Load_Request_From_Firebase.bind(Object(g.a)(n)),n.promise_setState=n.promise_setState.bind(Object(g.a)(n)),n}return Object(u.a)(a,[{key:"Update_Notification_Bell",value:function(){this.setState({hasNewNotifications:!0,bellColor:"#ff2121"})}},{key:"Relax_Notification_Bell",value:function(){this.setState({hasNewNotifications:!1,bellColor:"#000000"})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"not-container"},r.a.createElement("form",{onSubmit:this.Read_Notifications},r.a.createElement("button",{type:"submit"},"view requests",r.a.createElement(S.a,{width:"40",active:this.state.hasNewNotifications,animate:this.state.hasNewNotifications,color:this.state.bellColor}))),r.a.createElement(x,{notifications:this.state.notifications,myEmail:this.state.email}))}}]),a}(n.Component),he=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).updateSelectedCity=function(e){n.setState({selectedCity:e})},n.updateSortOption=function(e){n.setState({selectedSortOption:e})},n.updateRequestedRating=function(e){n.setState({minRating:e})},n.updateRequestedMeal=function(e){n.setState({requestedMeal:e})},n.updatePriceRange=function(e,t){n.setState({minPrice:e}),n.setState({maxPrice:t})},n.updateMealTags=function(e){n.setState({mealTags:e.map((function(e){return e.toLowerCase()}))})},n.getUserMeals=Object(c.a)(o.a.mark((function e(){var t,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/getMeals",(a=new XMLHttpRequest).open("GET",t),a.onreadystatechange=function(e){console.log(a.responseText)},e.abrupt("return",D.a.ajax({url:t,type:"POST",dataType:"json",data:JSON.stringify(n.state.user.mealIDs),success:function(e){},error:function(e){console.log("Error ".concat(e))}}).promise());case 5:case"end":return e.stop()}}),e)}))),n.getMeals=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.getMealIDs().then((function(e){return n.filterMeals(e)})).then((function(e){return n.setState({foodItems:e})})).then((function(){return n.setState({foodItems:fe(n.state.selectedSortOption,n.state.foodItems)})}));case 1:case"end":return e.stop()}}),e)}))),n.getMealIDs=Object(c.a)(o.a.mark((function e(){var t,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="?city="+n.state.selectedCity+"&minRating="+n.state.minRating,a="https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/users/"+t,(r=new XMLHttpRequest).open("GET",a),r.onreadystatechange=function(e){console.log(r.responseText)},e.abrupt("return",D.a.ajax({url:a,type:"GET",success:function(e){},error:function(e){console.log("Error ".concat(e))}}).then((function(e){return[].concat.apply([],e.map((function(e){return e.mealIDs})))})).promise());case 6:case"end":return e.stop()}}),e)}))),n.filterMeals=function(){var e=Object(c.a)(o.a.mark((function e(t){var a,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="?mealName="+n.state.requestedMeal+"&minPrice="+n.state.minPrice+"&maxPrice="+n.state.maxPrice,void 0!==n.state.mealTags&&0!=n.state.mealTags.length&&(a+="&mealTags="+JSON.stringify(n.state.mealTags)),r="https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/filterMeals"+a,(s=new XMLHttpRequest).open("GET",r),s.onreadystatechange=function(e){console.log(s.responseText)},e.abrupt("return",D.a.ajax({url:r,type:"GET",success:function(e){},error:function(e){console.log("Error ".concat(e))}}).then((function(e){return e.filter((function(e){return t.includes(e.mealID)}))})).promise());case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getUserInfo=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=localStorage.getItem("email"),n.loadUserInfo(t).then((function(e){n.setState({user:e.Item})})).then((function(){return n.getUserMeals().then((function(e){var t=e.filter((function(e){return"active"==e.listingStatus})),a=e.filter((function(e){return"pending"==e.listingStatus})),r=e.filter((function(e){return"sold"==e.listingStatus}));n.setState({userListings:{active:t,pending:a,sold:r}})}))}));case 2:case"end":return e.stop()}}),e)}))),n.renderMain=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(de,{cities:n.cities,selectedCity:n.state.selectedCity,updateSelectedCity:n.updateSelectedCity,sortOptions:n.sortOptions,selectedSortOption:n.state.selectedSortOption,updateSortOption:n.updateSortOption,getMeals:n.getMeals,updateRequestedMeal:n.updateRequestedMeal,updatePriceRange:n.updatePriceRange,updateMealTags:n.updateMealTags,updateRequestedRating:n.updateRequestedRating}),r.a.createElement(k,null),r.a.createElement(re,{user:n.state.user,userListings:n.state.userListings}),r.a.createElement(V,{foodItems:n.state.foodItems,getMealById:function(e){return n.setCurrentMeal(e)}}),r.a.createElement(K,{meal:n.state.currMeal}))},n.cities=["All","Bellevue","Renton","Issaquah","Redmond"],n.sortOptions=["Price","Name","Date Posted"],n.state={user:{},userListings:{active:[],pending:[],sold:[]},selectedSortOption:n.sortOptions?n.sortOptions[0]:"Price",selectedCity:n.cities?n.cities[0]:"All",requestedMeal:"",minPrice:0,maxPrice:999,mealTags:[],minRating:0,foodItems:[],mealIDs:[],currMeal:{mealId:0,mealName:"apple",mealPrice:"",mealDescription:"",mealImagePath:"",imgAlt:""}},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.getUserInfo(),this.getMeals()}},{key:"componentDidUpdate",value:function(){this.renderMain()}},{key:"loadUserInfo",value:function(e){var t="/user/"+e,a="https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/pj_stage_01";return a=a.concat(t),D.a.ajax({url:a,type:"GET",crossDomain:!0,contentType:"application/json",success:function(e){console.log(e)},error:function(e){console.log(e)}})}},{key:"setCurrentMeal",value:function(e){var t=this.state.foodItems.find((function(t){return t.mealID===e}));this.setState({currMeal:t})}},{key:"render",value:function(){var e=this;return r.a.createElement(N.a,null,r.a.createElement(Z.a,{exact:!0,path:"/",render:this.renderMain}),r.a.createElement(Z.a,{path:"/listing",component:function(){return r.a.createElement(G,{meal:e.state.currMeal,user:e.state.user})}}),r.a.createElement(Z.a,{path:"/newItem",component:R}),r.a.createElement(Z.a,{path:"/notifications",render:function(){return r.a.createElement(ge,{user:e.state.user})}}),r.a.createElement(Z.a,{path:"/updateItem",component:Y}))}}]),a}(n.Component),be=a(293),ve=(a(170),function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.userObj;return r.a.createElement("div",{className:"card-container-no-shadow"},r.a.createElement("img",{className:"avatar-img",src:e.imgsrc,alt:"Avatar"}),r.a.createElement("div",{className:"container"},r.a.createElement("h4",null,r.a.createElement("b",null,e.firstname," ",e.lastname)),r.a.createElement("h5",null,r.a.createElement("b",null,e.displayname)),r.a.createElement("p",null,e.city),r.a.createElement("p",null,e.rating)))}}]),a}(n.Component)),ye=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).Delete_Meal_From_Meals_Table=function(){var e=Object(c.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(a="https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/pj_stage_01").concat("/listings/"+t),e.abrupt("return",D.a.ajax({url:a,type:"DELETE",crossDomain:!0,contentType:"application/json",dataType:"json",success:function(e){console.log("Successfully delete from users table")},error:function(e){console.log(e)}}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.Delete_Meal_From_Users_Table=function(){var e=Object(c.a)(o.a.mark((function e(t,a,n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(r="https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/pj_stage_01").concat("/user/"+t+"/"+a+"/"+n),e.abrupt("return",D.a.ajax({url:r,type:"DELETE",crossDomain:!0,contentType:"application/json",dataType:"json",success:function(e){console.log("Successfully delete from users table")},error:function(e){console.log(e)}}));case 4:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),n.deletePost=function(){var e=Object(c.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.props.userObj.email,r=n.props.userPostings.map((function(e){return e.mealID})).indexOf(t),console.log("Index: "+r),e.next=5,n.Delete_Meal_From_Users_Table(a,t,r);case 5:return console.log("Deleted meal from users table"),e.next=8,n.Delete_Meal_From_Meals_Table(t);case 8:console.log("Deleted meal from meals table"),n.props.deleteItem(t);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={index:""},n.createPost=n.createPost.bind(Object(g.a)(n)),n.deletePost=n.deletePost.bind(Object(g.a)(n)),n}return Object(u.a)(a,[{key:"delete",value:function(e){console.log("Key is:"+e),this.props.delete(e)}},{key:"createPost",value:function(e){var t=this;return r.a.createElement("li",{key:e.mealID},r.a.createElement("div",{className:"card-container"},r.a.createElement("img",{className:"meal-img",src:e.mealImagePath,alt:"Meal-posting"}),r.a.createElement("div",{className:"container"},r.a.createElement("h4",null,r.a.createElement("b",null,e.mealName)),r.a.createElement("p",null,e.mealPrice),r.a.createElement("p",null,e.mealDescription),r.a.createElement("p",null,e.mealID),r.a.createElement("button",{type:"button",onClick:function(){t.deletePost(e.mealID)}},"remove"),r.a.createElement(N.c,{to:"/updateItem"},r.a.createElement("div",{className:"nav-link",onClick:function(){return localStorage.setItem("mealID",e.mealID)}},r.a.createElement("div",{className:"fas fa-plus"}))))))}},{key:"render",value:function(){var e=this.props.posts.map(this.createPost);return r.a.createElement("ul",{className:"post-list"},e)}}]),a}(n.Component),Ee=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).callLog=function(){var e=Object(c.a)(o.a.mark((function e(t){var a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.loadPostings(t);case 2:if(null==(a=e.sent)){e.next=9;break}return r=n.state.userPostings.concat(a.Item),e.next=7,n.promise_setState({userPostings:r},(function(){console.log(n.state.userPostings)}));case 7:e.next=10;break;case 9:console.log("Empty result2");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.processArray=function(){var e=Object(c.a)(o.a.mark((function e(t){var a,r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Object(be.a)(t),e.prev=1,a.s();case 3:if((r=a.n()).done){e.next=9;break}return s=r.value,e.next=7,n.callLog(s);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),a.e(e.t0);case 14:return e.prev=14,a.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})));return function(t){return e.apply(this,arguments)}}(),n.loadPostings=function(e){var t="/listings/"+String(e).trim(),a="https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/pj_stage_01";return a=a.concat(t),D.a.ajax({url:a,type:"GET",crossDomain:!0,contentType:"application/json",dataType:"json",success:function(e){console.log(e)},error:function(e){console.log(e)}})},n.promise_setState=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new Promise((function(e){n.setState(t,e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.getUserObject=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.loadUserInfo(localStorage.getItem("email"));case 2:if(null==(t=e.sent)){e.next=8;break}return e.next=6,n.promise_setState({userObj:t.Item});case 6:e.next=9;break;case 8:console.log("result is empty");case 9:case"end":return e.stop()}}),e)}))),n.getUserPostings=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.processArray(n.state.userObj.mealIDs);case 2:case"end":return e.stop()}}),e)}))),n.promise_async=Object(c.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getUserObject();case 2:return console.log("Complete!"),e.next=5,n.getUserPostings();case 5:return console.log("DONE!"),e.next=8,n.sortActive(n.state.userPostings);case 8:return console.log("Sort Active complete"),e.next=11,n.sortPending(n.state.userPostings);case 11:console.log("Sort Pending complete");case 12:case"end":return e.stop()}}),e)}))),n.sortActive=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.forEach(function(){var e=Object(c.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}if("active"!==t.listingStatus){e.next=5;break}return a=n.state.userActivePostings.concat(t),e.next=5,n.promise_setState({userActivePostings:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.sortPending=function(){var e=Object(c.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.forEach(function(){var e=Object(c.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=5;break}if("pending"!==t.listingStatus){e.next=5;break}return a=n.state.userPendingPostings.concat(t),e.next=5,n.promise_setState({userPendingPostings:a});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.deleteItem=function(){var e=Object(c.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.state.userPostings.filter((function(e){return e.mealID!==t})),e.next=3,n.promise_setState({userPostings:a});case 3:return a=n.state.userActivePostings.filter((function(e){return e.mealID!==t})),e.next=6,n.promise_setState({userActivePostings:a});case 6:return a=n.state.userPendingPostings.filter((function(e){return e.mealID!==t})),e.next=9,n.promise_setState({userPendingPostings:a});case 9:console.log(n.state.userPostings);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={userPostings:[],userActivePostings:[],userPendingPostings:[],userObj:{}},n.loadPostings=n.loadPostings.bind(Object(g.a)(n)),n.loadUserInfo=n.loadUserInfo.bind(Object(g.a)(n)),n.getUserObject=n.getUserObject.bind(Object(g.a)(n)),n.getUserPostings=n.getUserPostings.bind(Object(g.a)(n)),n.sortActive=n.sortActive.bind(Object(g.a)(n)),n.sortPending=n.sortPending.bind(Object(g.a)(n)),n.callLog=n.callLog.bind(Object(g.a)(n)),n.processArray=n.processArray.bind(Object(g.a)(n)),n.promise_async=n.promise_async.bind(Object(g.a)(n)),n.promise_setState=n.promise_setState.bind(Object(g.a)(n)),n.deleteItem=n.deleteItem.bind(Object(g.a)(n)),n}return Object(u.a)(a,[{key:"loadUserInfo",value:function(e){var t="/user/"+e,a="https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/pj_stage_01";return a=a.concat(t),D.a.ajax({url:a,type:"GET",crossDomain:!0,contentType:"application/json",success:function(e){},error:function(e){console.log(e)}})}},{key:"componentDidMount",value:function(){this.promise_async()}},{key:"render",value:function(){return r.a.createElement("div",{className:"profile-container"},r.a.createElement(k,null),r.a.createElement("div",{className:"left-container"},r.a.createElement(ve,{userObj:this.state.userObj})),r.a.createElement("div",{className:"right-container"},r.a.createElement("div",{className:"cred-container"},r.a.createElement("h1",null,"My Listings")),r.a.createElement("div",{className:"post-container"},r.a.createElement("h2",null,"Active"),r.a.createElement(ye,{posts:this.state.userActivePostings,userObj:this.state.userObj,userPostings:this.state.userPostings,deleteItem:this.deleteItem}),r.a.createElement("h2",null,"Pending"),r.a.createElement(ye,{posts:this.state.userPendingPostings,userObj:this.state.userObj,userPostings:this.state.userPostings,deleteItem:this.deleteItem}))))}}]),a}(n.Component);ee.b.configure({Auth:{identityPoolId:"us-west-2:4809a3a5-d7b3-436a-9030-4ec877205e7a",region:"us-west-2",userPoolId:"us-west-2_89J8r5C88",userPoolWebClientId:"6a9fkc41bp4j2r5ihu3vibm5a2"}});var Ne=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handleAddMeal=Object(c.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/listings",t={mealID:2800,mealDescription:R.state.foodDescription,mealImagePath:"google.com",mealName:R.state.mealName,mealPrice:R.state.price},D.a.ajax({url:"https://0o1szwcqn7.execute-api.us-west-2.amazonaws.com/max-stage/listings",type:"POST",dataType:"jsonp",headers:{accept:"application/json"},data:JSON.stringify(t),contentType:"application/json; charset=utf-8",success:function(e){console.log(e)},error:function(e,t,a){console.log(JSON.stringify(e))}}),e.abrupt("return",!1);case 4:case"end":return e.stop()}}),e)}))),e.callBackendAPI=function(){var e=Object(c.a)(o.a.mark((function e(t){var a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,200===a.status){e.next=8;break}throw Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(N.a,null,r.a.createElement(Z.c,null,r.a.createElement(Z.a,{exact:!0,path:"/",component:function(){return localStorage.getItem("token")?r.a.createElement(he,null):r.a.createElement(ne,{auth:ee.a})}}),r.a.createElement(Z.a,{path:"/newItem",component:R}),r.a.createElement(Z.a,{path:"/profile",component:Ee}),r.a.createElement(Z.a,{path:"/updateItem",component:Y}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));w.a.initializeApp({apiKey:"AIzaSyBWI5fBwmwjXYLu1jBtpVa7Ru_1I3cNJBs",authDomain:"food-network-chat.firebaseapp.com",databaseURL:"https://food-network-chat.firebaseio.com",projectId:"food-network-chat",storageBucket:"food-network-chat.appspot.com",messagingSenderId:"210291696500",appId:"1:210291696500:web:ff7e159b3cf410a3b94221",measurementId:"G-FN9DJ0GZBW"}),i.a.render(r.a.createElement(Ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[300,1,2]]]);
//# sourceMappingURL=main.03ad044a.chunk.js.map